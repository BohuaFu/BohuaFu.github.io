<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-TW">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Dart," />










<meta name="description" content="Dart 基礎語法这里将介绍 Dart 主要功能，从变量和运算符到类和库，假设您已经知道如何使用其他语言编程。 学习更多 Dart 核心库, 参考 Dart 库概览. 想了解更多有关语言功能的详细信息, 参考 Dart 编程语言规范. 提示: 使用 DartPad 可以体验 Dart 的大部分语言功能 (了解更多). 打开 DartPad">
<meta property="og:type" content="article">
<meta property="og:title" content="Dart 基礎語法">
<meta property="og:url" content="https://bohuafu.github.io/2020/04/13/dart/d-20200413-0006/index.html">
<meta property="og:site_name" content="BH, 我的部落格">
<meta property="og:description" content="Dart 基礎語法这里将介绍 Dart 主要功能，从变量和运算符到类和库，假设您已经知道如何使用其他语言编程。 学习更多 Dart 核心库, 参考 Dart 库概览. 想了解更多有关语言功能的详细信息, 参考 Dart 编程语言规范. 提示: 使用 DartPad 可以体验 Dart 的大部分语言功能 (了解更多). 打开 DartPad">
<meta property="og:locale" content="zh_TW">
<meta property="og:image" content="https://github.com/BohuaFu/AssetsBH/blob/master/dart/dart_00006.png?raw=true">
<meta property="og:image" content="https://www.dartcn.com/assets/red-run-50a66e01c7e7a877dbc06e799d5bc4b73c4dace2926ec17b4493d8c3e939c59a.png">
<meta property="og:image" content="https://www.dartcn.com/assets/red-run-50a66e01c7e7a877dbc06e799d5bc4b73c4dace2926ec17b4493d8c3e939c59a.png">
<meta property="article:published_time" content="2020-04-12T22:00:06.000Z">
<meta property="article:modified_time" content="2020-04-17T09:50:11.444Z">
<meta property="article:author" content="Bohua Fu">
<meta property="article:tag" content="Dart">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://github.com/BohuaFu/AssetsBH/blob/master/dart/dart_00006.png?raw=true">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://bohuafu.github.io/2020/04/13/dart/d-20200413-0006/"/>





  <title>Dart 基礎語法 | BH, 我的部落格</title>
  








<meta name="generator" content="Hexo 4.2.0"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-TW">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">BH, 我的部落格</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">學習・分享・改變</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            About
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://bohuafu.github.io/2020/04/13/dart/d-20200413-0006/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Bohua Fu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://github.com/BohuaFu/AssetsBH/blob/master/bh/avater/bh_avatar_001.jpg?raw=true">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BH, 我的部落格">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Dart 基礎語法</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-04-13T06:00:06+08:00">
                2020-04-13
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h2 id="Dart-基礎語法"><a href="#Dart-基礎語法" class="headerlink" title="Dart 基礎語法"></a>Dart 基礎語法</h2><p>这里将介绍 Dart 主要功能，从变量和运算符到类和库，假设您已经知道如何使用其他语言编程。</p>
<p>学习更多 Dart 核心库, 参考 <a href="https://www.dartcn.com/guides/libraries/library-tour" target="_blank" rel="noopener">Dart 库概览</a>. 想了解更多有关语言功能的详细信息, 参考 <a href="https://www.dartcn.com/guides/language/spec" target="_blank" rel="noopener">Dart 编程语言规范</a>.</p>
<p><strong>提示:</strong> 使用 DartPad 可以体验 Dart 的大部分语言功能 (<a href="https://www.dartcn.com/tools/dartpad" target="_blank" rel="noopener">了解更多</a>).</p>
<p><strong><a href="https://dartpad.cn/" target="_blank" rel="noopener">打开 DartPad</a></strong></p>
<a id="more"></a>

<h2 id="HelloWorld程序"><a href="#HelloWorld程序" class="headerlink" title="HelloWorld程序"></a>HelloWorld程序</h2><p>每个 app 都有一个 <code>main()</code> 函数。 使用顶级函数 <code>print()</code> 将文字输出到控制台。</p>
<p>D:\helloworld.dart</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">'Hello, World!'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>運行方式</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dart d:\helloworld.dart</span><br></pre></td></tr></table></figure>

<p>运行后成功在控制台输出<code>hello world!</code>。</p>
<h2 id="一个简单的-Dart-程序"><a href="#一个简单的-Dart-程序" class="headerlink" title="一个简单的 Dart 程序"></a>一个简单的 Dart 程序</h2><p>下面的代码用到了很多 Dart 的基本功能：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义一个函数</span></span><br><span class="line">printInteger(<span class="built_in">int</span> aNumber) &#123;</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">'The number is <span class="subst">$aNumber</span>.'</span>); <span class="comment">// 打印到控制台。</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 应用从这里开始执行。</span></span><br><span class="line">main() &#123;</span><br><span class="line">  <span class="keyword">var</span> number = <span class="number">42</span>; <span class="comment">// 声明并初始化一个变量。</span></span><br><span class="line">  printInteger(number); <span class="comment">// 调用函数。</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>以下是此程序使用的代码，这些代码适用于所有（或几乎所有）的 Dart 应用：</p>
<ul>
<li><p><code>// *代码注释。*</code></p>
<p>单行注释。 Dart 同样支持多行注释和文档注释。 有关更多信息，参考 <a href="https://www.dartcn.com/guides/language/language-tour#comments" target="_blank" rel="noopener">注释</a>.</p>
</li>
<li><p><code>int</code></p>
<p>数据类型。一些其他 <a href="https://www.dartcn.com/guides/language/language-tour#built-in-types" target="_blank" rel="noopener">内置类型</a> 包括 <code>String</code> , <code>List</code> , 和 <code>bool</code> 。</p>
</li>
<li><p><code>42</code></p>
<p>字面量。字面量是一种编译型常量。</p>
</li>
<li><p><code>print()</code></p>
<p>便利输出方式。</p>
</li>
<li><p><code>&#39;...&#39;</code> (or <code>&quot;...&quot;</code>)</p>
<p>字符串常量。</p>
</li>
<li><p><code>$*variableName*</code> (或 <code>${*expression*}</code>)</p>
<p>字符串插值： 包括字符串文字内部的变量或表达式的字符串。 有关更多信息，参考 <a href="https://www.dartcn.com/guides/language/language-tour#strings" target="_blank" rel="noopener">Strings</a>.</p>
</li>
<li><p><code>main()</code></p>
<p>程序开始执行函数，该函数是特定的、<em>必须的</em>、顶级函数。 有关更多信息，参考 <a href="https://www.dartcn.com/guides/language/language-tour#the-main-function" target="_blank" rel="noopener">The main() function</a>.</p>
</li>
<li><p><code>var</code></p>
<p>定义变量，通过这种方式定义变量不需要指定变量类型。</p>
</li>
</ul>
<p><strong>提示：</strong> 本站的代码遵循 Dart 风格指南中的约定。 <a href="https://www.dartcn.com/guides/language/effective-dart/style" target="_blank" rel="noopener">Dart 风格指南</a>.</p>
<h2 id="重要的概念"><a href="#重要的概念" class="headerlink" title="重要的概念"></a>重要的概念</h2><p>在学习 Dart 语言时, 应该基于以下事实和概念：</p>
<ul>
<li>任何保存在变量中的都是一个 <em>对象</em> ， 并且所有的对象都是对应一个 <em>类</em> 的实例。 无论是数字，函数和 <code>null</code> 都是对象。所有对象继承自 <a href="https://api.dartlang.org/stable/dart-core/Object-class.html" target="_blank" rel="noopener">Object</a> 类。</li>
<li>尽管 Dart 是强类型的，但是 Dart 可以推断类型，所以类型注释是可选的。 在上面的代码中， <code>number</code> 被推断为 <code>int</code> 类型。 如果要明确说明不需要任何类型， <a href="https://www.dartcn.com/guides/language/effective-dart/design#do-annotate-with-object-instead-of-dynamic-to-indicate-any-object-is-allowed" target="_blank" rel="noopener">需要使用特殊类型 <code>dynamic</code></a> 。</li>
<li>Dart 支持泛型，如 <code>List</code> （整数列表）或 <code>List</code> （任何类型的对象列表）。</li>
<li>Dart 支持顶级函数（例如 <code>main（）</code> ）， 同样函数绑定在类或对象上（分别是 <em>静态函数</em> 和 <em>实例函数</em> ）。 以及支持函数内创建函数 （ <em>嵌套</em> 或 <em>局部函数</em> ） 。</li>
<li>类似地， Dart 支持顶级 <em>变量</em> ， 同样变量绑定在类或对象上（静态变量和实例变量）。 实例变量有时称为字段或属性。</li>
<li>与 Java 不同，Dart 没有关键字 “public” ， “protected” 和 “private” 。 如果标识符以下划线（_）开头，则它相对于库是私有的。 有关更多信息，参考 <a href="https://www.dartcn.com/guides/language/language-tour#库和可见性" target="_blank" rel="noopener">库和可见性</a>。</li>
<li><em>标识符</em> 以字母或下划线（_）开头，后跟任意字母和数字组合。</li>
<li>Dart 语法中包含 <em>表达式（ expressions ）</em>（有运行时值）和 <em>语句（ statements ）</em>（没有运行时值）。 例如，<a href="https://www.dartcn.com/guides/language/language-tour#conditional-expressions" target="_blank" rel="noopener">条件表达式</a> <code>condition ? expr1 : expr2</code> 的值可能是 <code>expr1</code> 或 <code>expr2</code> 。 将其与 <a href="https://www.dartcn.com/guides/language/language-tour#if-和-else" target="_blank" rel="noopener">if-else 语句</a> 相比较，if-else 语句没有值。 一条语句通常包含一个或多个表达式，相反表达式不能直接包含语句。</li>
<li>Dart 工具提示两种类型问题：<em>警告<em>和</em>错误</em>。 警告只是表明代码可能无法正常工作，但不会阻止程序的执行。 错误可能是编译时错误或者运行时错误。 编译时错误会阻止代码的执行; 运行时错误会导致代码在执行过程中引发 [异常]（#exception）。</li>
</ul>
<h2 id="关键字"><a href="#关键字" class="headerlink" title="关键字"></a>关键字</h2><p>Dart 语言关键字列表。</p>
<table>
<thead>
<tr>
<th><a href="https://www.dartcn.com/guides/language/language-tour#抽象类" target="_blank" rel="noopener">abstract</a> 2</th>
<th><a href="https://www.dartcn.com/guides/language/language-tour#重要的概念" target="_blank" rel="noopener">dynamic</a> 2</th>
<th><a href="https://www.dartcn.com/guides/language/language-tour#隐式接口" target="_blank" rel="noopener">implements</a> 2</th>
<th><a href="https://www.dartcn.com/guides/language/language-tour#导入库的一部分" target="_blank" rel="noopener">show</a> 1</th>
</tr>
</thead>
<tbody><tr>
<td><a href="https://www.dartcn.com/guides/language/language-tour#类型判定运算符" target="_blank" rel="noopener">as</a> 2</td>
<td><a href="https://www.dartcn.com/guides/language/language-tour#if-和-else" target="_blank" rel="noopener">else</a></td>
<td><a href="https://www.dartcn.com/guides/language/language-tour#使用库" target="_blank" rel="noopener">import</a> 2</td>
<td><a href="https://www.dartcn.com/guides/language/language-tour#类变量和方法" target="_blank" rel="noopener">static</a> 2</td>
</tr>
<tr>
<td><a href="https://www.dartcn.com/guides/language/language-tour#assert" target="_blank" rel="noopener">assert</a></td>
<td><a href="https://www.dartcn.com/guides/language/language-tour#枚举类型" target="_blank" rel="noopener">enum</a></td>
<td><a href="https://www.dartcn.com/guides/language/language-tour#for-循环" target="_blank" rel="noopener">in</a></td>
<td><a href="https://www.dartcn.com/guides/language/language-tour#扩展类继承" target="_blank" rel="noopener">super</a></td>
</tr>
<tr>
<td><a href="https://www.dartcn.com/guides/language/language-tour#异步支持" target="_blank" rel="noopener">async</a> 1</td>
<td><a href="https://www.dartcn.com/guides/libraries/create-library-packages" target="_blank" rel="noopener">export</a> 2</td>
<td><a href="https://stackoverflow.com/questions/28595501/was-the-interface-keyword-removed-from-dart" target="_blank" rel="noopener">interface</a> 2</td>
<td><a href="https://www.dartcn.com/guides/language/language-tour#switch-和-case" target="_blank" rel="noopener">switch</a></td>
</tr>
<tr>
<td><a href="https://www.dartcn.com/guides/language/language-tour#异步支持" target="_blank" rel="noopener">await</a> 3</td>
<td><a href="https://www.dartcn.com/guides/language/language-tour#扩展类继承" target="_blank" rel="noopener">extends</a></td>
<td><a href="https://www.dartcn.com/guides/language/language-tour#类型判定运算符" target="_blank" rel="noopener">is</a></td>
<td><a href="https://www.dartcn.com/guides/language/language-tour#生成器" target="_blank" rel="noopener">sync</a> 1</td>
</tr>
<tr>
<td><a href="https://www.dartcn.com/guides/language/language-tour#break-和-continue" target="_blank" rel="noopener">break</a></td>
<td><a href="https://stackoverflow.com/questions/24929659/what-does-external-mean-in-dart" target="_blank" rel="noopener">external</a> 2</td>
<td><a href="https://www.dartcn.com/guides/language/language-tour#库和可见性" target="_blank" rel="noopener">library</a> 2</td>
<td><a href="https://www.dartcn.com/guides/language/language-tour#构造函数" target="_blank" rel="noopener">this</a></td>
</tr>
<tr>
<td><a href="https://www.dartcn.com/guides/language/language-tour#switch-和-case" target="_blank" rel="noopener">case</a></td>
<td><a href="https://www.dartcn.com/guides/language/language-tour#工厂构造函数" target="_blank" rel="noopener">factory</a> 2</td>
<td><a href="https://www.dartcn.com/guides/language/language-tour#为类添加功能mixins" target="_blank" rel="noopener">mixin</a> 2</td>
<td><a href="https://www.dartcn.com/guides/language/language-tour#throw" target="_blank" rel="noopener">throw</a></td>
</tr>
<tr>
<td><a href="https://www.dartcn.com/guides/language/language-tour#catch" target="_blank" rel="noopener">catch</a></td>
<td><a href="https://www.dartcn.com/guides/language/language-tour#booleans" target="_blank" rel="noopener">false</a></td>
<td><a href="https://www.dartcn.com/guides/language/language-tour#使用构造函数" target="_blank" rel="noopener">new</a></td>
<td><a href="https://www.dartcn.com/guides/language/language-tour#booleans" target="_blank" rel="noopener">true</a></td>
</tr>
<tr>
<td><a href="https://www.dartcn.com/guides/language/language-tour#实例变量" target="_blank" rel="noopener">class</a></td>
<td><a href="https://www.dartcn.com/guides/language/language-tour#final-和-const" target="_blank" rel="noopener">final</a></td>
<td><a href="https://www.dartcn.com/guides/language/language-tour#默认值" target="_blank" rel="noopener">null</a></td>
<td><a href="https://www.dartcn.com/guides/language/language-tour#catch" target="_blank" rel="noopener">try</a></td>
</tr>
<tr>
<td><a href="https://www.dartcn.com/guides/language/language-tour#final-和-const" target="_blank" rel="noopener">const</a></td>
<td><a href="https://www.dartcn.com/guides/language/language-tour#finally" target="_blank" rel="noopener">finally</a></td>
<td><a href="https://www.dartcn.com/guides/language/language-tour#catch" target="_blank" rel="noopener">on</a> 1</td>
<td><a href="https://www.dartcn.com/guides/language/language-tour#typedefs" target="_blank" rel="noopener">typedef</a> 2</td>
</tr>
<tr>
<td><a href="https://www.dartcn.com/guides/language/language-tour#break-和-continue" target="_blank" rel="noopener">continue</a></td>
<td><a href="https://www.dartcn.com/guides/language/language-tour#for-循环" target="_blank" rel="noopener">for</a></td>
<td><a href="https://www.dartcn.com/guides/language/language-tour#重写运算符" target="_blank" rel="noopener">operator</a> 2</td>
<td><a href="https://www.dartcn.com/guides/language/language-tour#变量" target="_blank" rel="noopener">var</a></td>
</tr>
<tr>
<td><a href="https://www.dartcn.com/guides/language/sound-problems#the-covariant-keyword" target="_blank" rel="noopener">covariant</a> 2</td>
<td><a href="https://www.dartcn.com/guides/language/language-tour#函数" target="_blank" rel="noopener">Function</a> 2</td>
<td><a href="https://www.dartcn.com/guides/libraries/create-library-packages#organizing-a-library-package" target="_blank" rel="noopener">part</a> 2</td>
<td><a href="https://medium.com/dartlang/dart-2-legacy-of-the-void-e7afb5f44df0" target="_blank" rel="noopener">void</a></td>
</tr>
<tr>
<td><a href="https://www.dartcn.com/guides/language/language-tour#switch-和-case" target="_blank" rel="noopener">default</a></td>
<td><a href="https://www.dartcn.com/guides/language/language-tour#getters-和-setters" target="_blank" rel="noopener">get</a> 2</td>
<td><a href="https://www.dartcn.com/guides/language/language-tour#catch" target="_blank" rel="noopener">rethrow</a></td>
<td><a href="https://www.dartcn.com/guides/language/language-tour#while-和-do-while" target="_blank" rel="noopener">while</a></td>
</tr>
<tr>
<td><a href="https://www.dartcn.com/guides/language/language-tour#延迟加载库" target="_blank" rel="noopener">deferred</a> 2</td>
<td><a href="https://www.dartcn.com/guides/language/language-tour#导入库的一部分" target="_blank" rel="noopener">hide</a> 1</td>
<td><a href="https://www.dartcn.com/guides/language/language-tour#函数" target="_blank" rel="noopener">return</a></td>
<td><a href="https://www.dartcn.com/guides/language/language-tour#为类添加功能mixins" target="_blank" rel="noopener">with</a></td>
</tr>
<tr>
<td><a href="https://www.dartcn.com/guides/language/language-tour#while-和-do-while" target="_blank" rel="noopener">do</a></td>
<td><a href="https://www.dartcn.com/guides/language/language-tour#if-和-else" target="_blank" rel="noopener">if</a></td>
<td><a href="https://api.dartlang.org/stable/dart-core/Set-class.html" target="_blank" rel="noopener">set</a> 2</td>
<td><a href="https://www.dartcn.com/guides/language/language-tour#生成器" target="_blank" rel="noopener">yield</a> 3</td>
</tr>
</tbody></table>
<p>避免使用这些单词作为标识符。 但是，如有必要，标有上标的关键字可以用作标识符：</p>
<ul>
<li>带有 <strong>1</strong> 上标的单词为 <strong>上下文关键字</strong>， 仅在特定位置具有含义。 他们在任何地方都是有效的标识符。</li>
<li>带有 <strong>2</strong> 上标的单词为 <strong>内置标识符</strong>， 为了简化将 JavaScript 代码移植到 Dart 的工作， 这些关键字在大多数地方都是有效的标识符， 但它们不能用作类或类型名称，也不能用作 import 前缀。</li>
<li>带有 <strong>3</strong> 上标的单词是与 Dart 1.0 发布后添加的<a href="https://www.dartcn.com/guides/language/language-tour#异步支持" target="_blank" rel="noopener">异步支持</a>相关的更新，作为限制类保留字。<br>不能在标记为 <code>async</code> ，<code>async*</code> 或 <code>sync*</code> 的任何函数体中使用 <code>await</code> 或 <code>yield</code> 作为标识符。</li>
</ul>
<p>关键字表中的剩余单词都是<strong>保留字</strong>。 不能将保留字用作标识符。</p>
<h2 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h2><p>创建一个变量并进行初始化:</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> name = <span class="string">'Bob'</span>;</span><br></pre></td></tr></table></figure>

<p>变量仅存储对象引用，这里的变量是 <code>name</code> 存储了一个 <code>String</code> 类型的对象引用。 “Bob” 是这个 <code>String</code> 类型对象的值。</p>
<p><code>name</code> 变量的类型被推断为 <code>String</code> 。 但是也可以通过指定类型的方式，是静态类型语言常用的方式，来改变变量类型。 如果对象不限定为单个类型，可以指定为 <code>对象类型</code> 或 <code>动态类型</code>，动态语言的常用方式， 参考 <a href="https://www.dartcn.com/guides/language/effective-dart/design#do-annotate-with-object-instead-of-dynamic-to-indicate-any-object-is-allowed" target="_blank" rel="noopener">设计指南</a>。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">dynamic</span> name = <span class="string">'Bob'</span>;</span><br></pre></td></tr></table></figure>

<p>另一种方式是显式声明可以推断出的类型：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">String</span> name = <span class="string">'Bob'</span>;</span><br></pre></td></tr></table></figure>

<p><strong>提示：</strong> 本页局部变量遵守 <a href="https://www.dartcn.com/guides/language/effective-dart/design#types" target="_blank" rel="noopener">风格建议指南</a> 使用 <code>var</code>。 没有使用指定类型的方式。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 1.通过显式指定类型来定义变量</span><br><span class="line">String name &#x3D; &quot;张三&quot;;</span><br><span class="line">num age &#x3D; 18;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 2.使用关键字var，不指定类型</span><br><span class="line">var address &#x3D; &quot;深南大道&quot;;</span><br><span class="line">var id &#x3D; 100;</span><br><span class="line"></span><br><span class="line">&#x2F;* 使用var定义变量，即使未显式指定类型，一旦赋值后类型就被固定</span><br><span class="line"> * 因此使用var定义的变量不能改变数据类型</span><br><span class="line"> *&#x2F;</span><br><span class="line">var number &#x3D; 19;</span><br><span class="line">&#x2F;&#x2F; 以下代码错误，无法运行，number变量已确定为int类型</span><br><span class="line">number &#x3D; &quot;2019&quot;;</span><br></pre></td></tr></table></figure>

<p>如想动态改变变量的数据类型，应当使用<code>dynamic</code>或<code>Object</code>来定义变量。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; dynamic声明变量</span><br><span class="line">dynamic var1 &#x3D; &quot;hello&quot;;</span><br><span class="line">var1 &#x3D; 19;</span><br><span class="line">print(var1);    &#x2F;&#x2F; 19</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; Object声明变量</span><br><span class="line">Object var2 &#x3D; 20;</span><br><span class="line">var2 &#x3D; &quot;Alice&quot;;</span><br><span class="line">print(var2);    &#x2F;&#x2F; Alice</span><br></pre></td></tr></table></figure>

<p>建议在编写代码时，尽可能显式指定变量类型，这样可以提升代码可读性与调试的便利性。</p>
<h3 id="默认值"><a href="#默认值" class="headerlink" title="默认值"></a>默认值</h3><p>未初始化的变量默认值是 <code>null</code>。即使变量是数字 类型默认值也是 null，因为在 Dart 中一切都是对象，数字类型 也不例外。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">int</span> lineCount;</span><br><span class="line"><span class="keyword">assert</span>(lineCount == <span class="keyword">null</span>);</span><br></pre></td></tr></table></figure>

<p><strong>提示：</strong> 在生产环境代码中 <code>assert()</code> 函数会被忽略，不会被调用。 在开发过程中, <code>assert(*condition*)</code> 会在非 <code>true</code> 的条件下抛出异常.有关更多信息，参考 <a href="https://www.dartcn.com/guides/language/language-tour#assert" target="_blank" rel="noopener">Assert</a>.</p>
<h3 id="Final-和-Const"><a href="#Final-和-Const" class="headerlink" title="Final 和 Const"></a>Final 和 Const</h3><p>使用过程中从来不会被修改的变量， 可以使用 <code>final</code> 或 <code>const</code>, 而不是 <code>var</code> 或者其他类型， Final 变量的值只能被设置一次； Const 变量在编译时就已经固定 (Const 变量 是隐式 Final 的类型.) 最高级 final 变量或类变量在第一次使用时被初始化。</p>
<blockquote>
<p><strong>提示：</strong> 实例变量可以是 <code>final</code> 类型但不能是 <code>const</code> 类型。 必须在构造函数体执行之前初始化 final 实例变量 —— 在变量声明中，参数构造函数中或构造函数的<a href="https://www.dartcn.com/guides/language/language-tour#initializer-list" target="_blank" rel="noopener">初始化列表</a>中进行初始化。</p>
</blockquote>
<p>创建和设置一个 Final 变量：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//使用final关键字定义常量</span></span><br><span class="line"><span class="keyword">final</span> name = <span class="string">'Bob'</span>; <span class="comment">// Without a type annotation</span></span><br><span class="line"><span class="keyword">final</span> <span class="built_in">String</span> nickname = <span class="string">'Bobby'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">final</span> height = <span class="number">10</span>;</span><br></pre></td></tr></table></figure>

<p>final 不能被修改:</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">name = <span class="string">'Alice'</span>; <span class="comment">// Error: 一个 final 变量只能被设置一次。</span></span><br></pre></td></tr></table></figure>

<p>如果需要在<strong>编译时</strong>就固定变量的值，可以使用 <code>const</code> 类型变量。 如果 Const 变量是类级别的，需要标记为 <code>static const</code>。 在这些地方可以使用在编译时就已经固定不变的值，字面量的数字和字符串， 固定的变量，或者是用于计算的固定数字：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 使用const关键字定义常量</span></span><br><span class="line"><span class="keyword">const</span> bar = <span class="number">1000000</span>; <span class="comment">// 压力单位 (dynes/cm2)</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">double</span> atm = <span class="number">1.01325</span> * bar; <span class="comment">// 标准气压</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> pi = <span class="number">3.14</span>;</span><br></pre></td></tr></table></figure>

<p>Const 关键字不仅可以用于声明常量变量。 还可以用来创建常量值，以及声明创建常量值的构造函数。 任何变量都可以拥有常量值。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> foo = <span class="keyword">const</span> [];</span><br><span class="line"><span class="keyword">final</span> bar = <span class="keyword">const</span> [];</span><br><span class="line"><span class="keyword">const</span> baz = []; <span class="comment">// Equivalent to `const []`</span></span><br></pre></td></tr></table></figure>

<p>声明 <code>const</code> 的初始化表达式中 <code>const</code> 可以被省略。 比如上面的 <code>baz</code>。 有关更多信息，参考 <a href="https://www.dartcn.com/guides/language/effective-dart/usage#dont-use-const-redundantly" target="_blank" rel="noopener">DON’T use const redundantly</a>。</p>
<p>非 Final ， 非 const 的变量是可以被修改的，即使这些变量 曾经引用过 const 值。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">foo = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]; <span class="comment">// 曾经引用过 const [] 常量值。</span></span><br></pre></td></tr></table></figure>

<p>Const 变量的值不可以修改：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">baz = [<span class="number">42</span>]; <span class="comment">// Error: 常量变量不能赋值修改。</span></span><br></pre></td></tr></table></figure>

<p>更多关于使用 <code>const</code> 创建常量值，参考 <a href="https://www.dartcn.com/guides/language/language-tour#lists" target="_blank" rel="noopener">Lists</a>， <a href="https://www.dartcn.com/guides/language/language-tour#maps" target="_blank" rel="noopener">Maps</a>， 和 <a href="https://www.dartcn.com/guides/language/language-tour#classes" target="_blank" rel="noopener">Classes</a>。</p>
<blockquote>
<p>需要注意，<code>final</code>定义的常量是运行时常量，而<code>const</code>常量则是编译时常量，也就是说<code>final</code>定义常量时，其值可以是一个变量，而<code>const</code>定义的常量，其值必须是一个字面常量值。</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">final time &#x3D; new DateTime.now(); &#x2F;&#x2F; 正确</span><br><span class="line">const time &#x3D; new DateTime.now(); &#x2F;&#x2F; 错误</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">const list &#x3D; const[1,2,3];       &#x2F;&#x2F; 正确</span><br><span class="line">const list &#x3D; [1,2,3];            &#x2F;&#x2F; 错误</span><br></pre></td></tr></table></figure>

<h2 id="内建类型"><a href="#内建类型" class="headerlink" title="内建类型"></a>内建类型</h2><p>Dart 语言支持以下内建类型：</p>
<ul>
<li>Number</li>
<li>String</li>
<li>Boolean</li>
<li>List (也被称为 <em>Array</em>)</li>
<li>Map</li>
<li>Set</li>
<li>Rune (用于在字符串中表示 Unicode 字符)</li>
<li>Symbol</li>
</ul>
<p><img src="https://github.com/BohuaFu/AssetsBH/blob/master/dart/dart_00006.png?raw=true" alt=""></p>
<blockquote>
<p>在Dart中，所有能够使用变量引用的都是对象，每个对象都是一个类的实例。数字、函数和 <code>null</code> 也都是对象。所有的对象都继承于Object类。</p>
</blockquote>
<p>这些类型都可以被初始化为字面量。 例如, <code>&#39;this is a string&#39;</code> 是一个字符串的字面量， <code>true</code> 是一个布尔的字面量。</p>
<blockquote>
<p>要注意，没有初始化的变量默认值为 <code>null</code>。数值类型变量的默认值也是 <code>null</code>。</p>
</blockquote>
<p>因为在 Dart 所有的变量终究是一个对象（一个类的实例）， 所以变量可以使用 <em>构造涵数</em> 进行初始化。 一些内建类型拥有自己的构造函数。 例如， 通过 <code>Map()</code> 来构造一个 map 变量。</p>
<h3 id="Number"><a href="#Number" class="headerlink" title="Number"></a>Number</h3><p>Dart 语言的 Number 有两种类型:</p>
<ul>
<li><p><a href="https://api.dartlang.org/stable/dart-core/int-class.html" target="_blank" rel="noopener">int</a></p>
<p>整数值不大于64位， 具体取决于平台。 在 Dart VM 上， 值的范围从 -263 到 263 - 1. Dart 被编译为 JavaScript 时，使用 <a href="https://stackoverflow.com/questions/2802957/number-of-bits-in-javascript-numbers/2803010#2803010" target="_blank" rel="noopener">JavaScript numbers,</a> 值的范围从 -253 到 253 - 1.</p>
</li>
<li><p><a href="https://api.dartlang.org/stable/dart-core/double-class.html" target="_blank" rel="noopener">double</a></p>
<p>64位（双精度）浮点数，依据 IEEE 754 标准。</p>
</li>
</ul>
<p><code>int</code> 和 <code>double</code> 都是 <a href="https://api.dartlang.org/stable/dart-core/num-class.html" target="_blank" rel="noopener"><code>num</code>.</a> 的亚类型。 num 类型包括基本运算 +， -， /， 和 *， 以及 <code>abs()</code>，<code>ceil()</code>， 和 <code>floor()</code>， 等函数方法。 （按位运算符，例如»，定义在 int 类中。） 如果 num 及其亚类型找不到你想要的方法， 尝试查找使用 <a href="https://api.dartlang.org/stable/dart-math" target="_blank" rel="noopener">dart:math</a> 库。</p>
<p>整数类型不包含小数点。 下面是定义整数类型字面量的例子:</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> x = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">var</span> hex = <span class="number">0xDEADBEEF</span>;</span><br></pre></td></tr></table></figure>

<p>如果一个数字包含小数点，那么就是小数类型。 下面是定义小数类型字面量的例子:</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> y = <span class="number">1.1</span>;</span><br><span class="line"><span class="keyword">var</span> exponents = <span class="number">1.42e5</span>;</span><br></pre></td></tr></table></figure>

<p>从 Dart 2.1 开始，必要的时候 int 字面量会自动转换成 double 类型。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">double</span> z = <span class="number">1</span>; <span class="comment">// 相当于 double z = 1.0.</span></span><br></pre></td></tr></table></figure>

<p><strong>版本提示：</strong> 在 2.1 之前，在 double 上下文中使用 int 字面量是错误的。</p>
<p>以下是将字符串转换为数字的方法，反之亦然：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// String -&gt; int</span></span><br><span class="line"><span class="keyword">var</span> one = <span class="built_in">int</span>.parse(<span class="string">'1'</span>);</span><br><span class="line"><span class="keyword">assert</span>(one == <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// String -&gt; double</span></span><br><span class="line"><span class="keyword">var</span> onePointOne = <span class="built_in">double</span>.parse(<span class="string">'1.1'</span>);</span><br><span class="line"><span class="keyword">assert</span>(onePointOne == <span class="number">1.1</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// int -&gt; String</span></span><br><span class="line"><span class="built_in">String</span> oneAsString = <span class="number">1.</span>toString();</span><br><span class="line"><span class="keyword">assert</span>(oneAsString == <span class="string">'1'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// double -&gt; String</span></span><br><span class="line"><span class="built_in">String</span> piAsString = <span class="number">3.14159</span>.toStringAsFixed(<span class="number">2</span>);</span><br><span class="line"><span class="keyword">assert</span>(piAsString == <span class="string">'3.14'</span>);</span><br></pre></td></tr></table></figure>

<p>int 特有的传统按位运算操作，移位（&lt;&lt;， &gt;&gt;），按位与（&amp;）以及 按位或（|）。 例如：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">assert</span>((<span class="number">3</span> &lt;&lt; <span class="number">1</span>) == <span class="number">6</span>); <span class="comment">// 0011 &lt;&lt; 1 == 0110</span></span><br><span class="line"><span class="keyword">assert</span>((<span class="number">3</span> &gt;&gt; <span class="number">1</span>) == <span class="number">1</span>); <span class="comment">// 0011 &gt;&gt; 1 == 0001</span></span><br><span class="line"><span class="keyword">assert</span>((<span class="number">3</span> | <span class="number">4</span>) == <span class="number">7</span>); <span class="comment">// 0011 | 0100 == 0111</span></span><br></pre></td></tr></table></figure>

<p>数字类型字面量是编译时常量。 在算术表达式中，只要参与计算的因子是编译时常量， 那么算术表达式的结果也是编译时常量。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> msPerSecond = <span class="number">1000</span>;</span><br><span class="line"><span class="keyword">const</span> secondsUntilRetry = <span class="number">5</span>;</span><br><span class="line"><span class="keyword">const</span> msUntilRetry = secondsUntilRetry * msPerSecond;</span><br></pre></td></tr></table></figure>

<p>舉例來說</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; String 转 int</span><br><span class="line">var one &#x3D; int.parse(&#39;1&#39;);</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; String 转 double</span><br><span class="line">var onePointOne &#x3D; double.parse(&#39;1.1&#39;);</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; int 转 String</span><br><span class="line">String oneAsStr &#x3D; 1.toString();</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; double 转 String</span><br><span class="line">String piAsStr &#x3D; 3.14159.toStringAsFixed(2); &#x2F;&#x2F; 保留两位 &#39;3.14&#39;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; Dart也支持整数位操作，&lt;&lt;、 &gt;&gt;、&amp;、|</span><br><span class="line">print((3 &lt;&lt; 1) &#x3D;&#x3D; 6);  &#x2F;&#x2F; 0011 &lt;&lt; 1 &#x3D;&#x3D; 0110</span><br><span class="line">print((3 &gt;&gt; 1) &#x3D;&#x3D; 1);  &#x2F;&#x2F; 0011 &gt;&gt; 1 &#x3D;&#x3D; 0001</span><br><span class="line">print((3 | 4)  &#x3D;&#x3D; 7);  &#x2F;&#x2F; 0011 | 0100 &#x3D;&#x3D; 0111</span><br></pre></td></tr></table></figure>

<h3 id="String"><a href="#String" class="headerlink" title="String"></a>String</h3><p>Dart 字符串是一组 UTF-16 单元序列。 字符串通过单引号或者双引号创建。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> s1 = <span class="string">'Single quotes work well for string literals.'</span>;</span><br><span class="line"><span class="keyword">var</span> s2 = <span class="string">"Double quotes work just as well."</span>;</span><br><span class="line"><span class="keyword">var</span> s3 = <span class="string">'It\'s easy to escape the string delimiter.'</span>;</span><br><span class="line"><span class="keyword">var</span> s4 = <span class="string">"It's even easier to use the other delimiter."</span>;</span><br></pre></td></tr></table></figure>

<p>字符串可以通过 <code>${</code><em><code>expression</code></em><code>}</code> 的方式内嵌表达式。 如果表达式是一个标识符，则 {} 可以省略。</p>
<blockquote>
<p>值得一提的是，Dart中提供的字符串<code>插值表达式</code>使字符串格式化变得异常方便。</p>
</blockquote>
<p>在 Dart 中通过调用就对象的 <code>toString()</code> 方法来得到对象相应的字符串。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> s = <span class="string">'string interpolation'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">assert</span>(<span class="string">'Dart has <span class="subst">$s</span>, which is very handy.'</span> ==</span><br><span class="line">    <span class="string">'Dart has string interpolation, '</span> +</span><br><span class="line">        <span class="string">'which is very handy.'</span>);</span><br><span class="line"><span class="keyword">assert</span>(<span class="string">'That deserves all caps. '</span> +</span><br><span class="line">        <span class="string">'<span class="subst">$&#123;s.toUpperCase()&#125;</span> is very handy!'</span> ==</span><br><span class="line">    <span class="string">'That deserves all caps. '</span> +</span><br><span class="line">        <span class="string">'STRING INTERPOLATION is very handy!'</span>);</span><br></pre></td></tr></table></figure>

<p><strong>提示：</strong> <code>==</code> 运算符用来测试两个对象是否相等。 在字符串中，如果两个字符串包含了相同的编码序列，那么这两个字符串相等。 units.</p>
<p>可以使用 <code>+</code> 运算符来把多个字符串连接为一个，也可以把多个字面量字符串写在一起来实现字符串连接：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> s1 = <span class="string">'String '</span></span><br><span class="line">    <span class="string">'concatenation'</span></span><br><span class="line">    <span class="string">" works even over line breaks."</span>;</span><br><span class="line"><span class="keyword">assert</span>(s1 ==</span><br><span class="line">    <span class="string">'String concatenation works even over '</span></span><br><span class="line">    <span class="string">'line breaks.'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> s2 = <span class="string">'The + operator '</span> + <span class="string">'works, as well.'</span>;</span><br><span class="line"><span class="keyword">assert</span>(s2 == <span class="string">'The + operator works, as well.'</span>);</span><br></pre></td></tr></table></figure>

<p>使用连续三个单引号或者三个双引号实现多行字符串对象的创建：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> s1 = <span class="string">'''</span></span><br><span class="line"><span class="string">You can create</span></span><br><span class="line"><span class="string">multi-line strings like this one.</span></span><br><span class="line"><span class="string">'''</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> s2 = <span class="string">"""This is also a</span></span><br><span class="line"><span class="string">multi-line string."""</span>;</span><br></pre></td></tr></table></figure>

<p>使用 <code>r</code> 前缀，可以创建 “原始 raw” 字符串：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> s = <span class="string">r"In a raw string, even \n isn't special."</span>;</span><br></pre></td></tr></table></figure>

<p>参考 <a href="https://www.dartcn.com/guides/language/language-tour#runes" target="_blank" rel="noopener">Runes</a> 来了解如何在字符串中表达 Unicode 字符。</p>
<p>一个编译时常量的字面量字符串中，如果存在插值表达式，表达式内容也是编译时常量， 那么该字符串依旧是编译时常量。 插入的常量值类型可以是 null，数值，字符串或布尔值。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// const 类型数据</span></span><br><span class="line"><span class="keyword">const</span> aConstNum = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">const</span> aConstBool = <span class="keyword">true</span>;</span><br><span class="line"><span class="keyword">const</span> aConstString = <span class="string">'a constant string'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 非 const 类型数据</span></span><br><span class="line"><span class="keyword">var</span> aNum = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">var</span> aBool = <span class="keyword">true</span>;</span><br><span class="line"><span class="keyword">var</span> aString = <span class="string">'a string'</span>;</span><br><span class="line"><span class="keyword">const</span> aConstList = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> validConstString = <span class="string">'<span class="subst">$aConstNum</span> <span class="subst">$aConstBool</span> <span class="subst">$aConstString</span>'</span>; <span class="comment">//const 类型数据</span></span><br><span class="line"><span class="comment">// const invalidConstString = '$aNum $aBool $aString $aConstList'; //非 const 类型数据</span></span><br></pre></td></tr></table></figure>

<p>舉例來說</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 1.Dart可以使用单引号或双引号来创建字符串</span><br><span class="line">var s1 &#x3D; &quot;hello&quot;;</span><br><span class="line">var s2 &#x3D; &#39;world&#39;;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 2.类似Python，Dart可以使用三引号来创建包含多行的字符串</span><br><span class="line">var multiLine1 &#x3D; &quot;&quot;&quot;你可以像这样，创建一个</span><br><span class="line">包含了多行的字符串内容</span><br><span class="line">&quot;&quot;&quot;;</span><br><span class="line"></span><br><span class="line">var multiLine2 &#x3D; &#39;&#39;&#39;你也可以使用三个单引号，创建一个</span><br><span class="line">包含了多行的字符串内容</span><br><span class="line">&#39;&#39;&#39;;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 3.类似Python，还可以在字符串字面值的前面加上&#96;r&#96;来创建原始字符串，则该字符串中特殊字符可以不用转义</span><br><span class="line">var path &#x3D; r&#39;D:\workspace\code&#39;;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 4.Dart支持使用&quot;+&quot;操作符拼接字符串</span><br><span class="line">var greet &#x3D; &quot;hello&quot; + &quot; world&quot;;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 5.Dart提供了插值表达式&quot;$&#123;&#125;&quot;，也可以用于拼接字符串</span><br><span class="line">var name &#x3D; &quot;王五&quot;;</span><br><span class="line">var aStr &#x3D; &quot;hello,$&#123;name&#125;&quot;;</span><br><span class="line">print(aStr);    &#x2F;&#x2F; hello,王五</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 当仅取变量值时，可以省略花括号</span><br><span class="line">var aStr2 &#x3D; &quot;hello,$name&quot;; &#x2F;&#x2F; hello,王五</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 当拼接的是一个表达式时，则不能省略花括号</span><br><span class="line">var str1 &#x3D; &quot;link&quot;;</span><br><span class="line">var str2 &#x3D; &quot;click $&#123;str1.toUpperCase()&#125;&quot;;</span><br><span class="line">print(str2);   &#x2F;&#x2F; click LINK</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 6. 与Java不同，Dart使用&quot;&#x3D;&#x3D;&quot;来比较字符串的内容</span><br><span class="line">print(&quot;hello&quot; &#x3D;&#x3D; &quot;world&quot;);</span><br></pre></td></tr></table></figure>

<p>更多关于 string 的使用, 参考 <a href="https://www.dartcn.com/guides/libraries/library-tour#strings-and-regular-expressions" target="_blank" rel="noopener">字符串和正则表达式</a>.</p>
<h3 id="Boolean"><a href="#Boolean" class="headerlink" title="Boolean"></a>Boolean</h3><p>Dart 使用 <code>bool</code> 类型表示布尔值。 Dart 只有字面量 <code>true</code> and <code>false</code> 是布尔类型， 这两个对象都是编译时常量。</p>
<blockquote>
<p>Dart中的布尔类型用法同Java，仅有<code>false</code>、<code>true</code>两个值，不能使用0、非0或者<code>null</code>、非<code>null</code>来表达<code>false</code>和<code>true</code>。与Java不同的是，布尔类型的默认值为<code>null</code></p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">bool flags;</span><br><span class="line">print(flags);    &#x2F;&#x2F; null</span><br></pre></td></tr></table></figure>

<p>Dart 的类型安全意味着不能使用 <code>if (*nonbooleanValue*)</code> 或者 <code>assert (*nonbooleanValue*)</code>。 而是应该像下面这样，明确的进行值检查：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 检查空字符串。</span></span><br><span class="line"><span class="keyword">var</span> fullName = <span class="string">''</span>;</span><br><span class="line"><span class="keyword">assert</span>(fullName.isEmpty);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 检查 0 值。</span></span><br><span class="line"><span class="keyword">var</span> hitPoints = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">assert</span>(hitPoints &lt;= <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 检查 null 值。</span></span><br><span class="line"><span class="keyword">var</span> unicorn;</span><br><span class="line"><span class="keyword">assert</span>(unicorn == <span class="keyword">null</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 检查 NaN 。</span></span><br><span class="line"><span class="keyword">var</span> iMeantToDoThis = <span class="number">0</span> / <span class="number">0</span>;</span><br><span class="line"><span class="keyword">assert</span>(iMeantToDoThis.isNaN);</span><br></pre></td></tr></table></figure>

<h3 id="List"><a href="#List" class="headerlink" title="List"></a>List</h3><p>几乎每种编程语言中最常见的集合可能是 <em>array</em> 或有序的对象集合。 在 Dart 中的 <em>Array</em> 就是 <a href="https://api.dartlang.org/stable/dart-core/List-class.html" target="_blank" rel="noopener">List</a> 对象， 通常称之为 <em>List</em> 。</p>
<p>Dart 中的 List 字面量非常像 JavaScript 中的 array 字面量。 下面是一个 Dart List 的示例：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> list = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br></pre></td></tr></table></figure>

<p><strong>提示：</strong> Dart 推断 <code>list</code> 的类型为 <code>List</code> 。 如果尝试将非整数对象添加到此 List 中， 则分析器或运行时会引发错误。 有关更多信息，请阅读 <a href="https://www.dartcn.com/guides/language/sound-dart#type-inference" target="_blank" rel="noopener">类型推断。</a></p>
<p>Lists 的下标索引从 0 开始，第一个元素的索引是 0。 list.length - 1 是最后一个元素的索引。 访问 List 的长度和元素与 JavaScript 中的用法一样：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> list = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="keyword">assert</span>(list.length == <span class="number">3</span>);</span><br><span class="line"><span class="keyword">assert</span>(list[<span class="number">1</span>] == <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">list[<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">assert</span>(list[<span class="number">1</span>] == <span class="number">1</span>);</span><br></pre></td></tr></table></figure>

<p>在 List 字面量之前添加 const 关键字，可以定义 List 类型的编译时常量：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> constantList = <span class="keyword">const</span> [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="comment">// constantList[1] = 1; // 取消注释会引起错误。</span></span><br></pre></td></tr></table></figure>

<p>舉例來說</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 创建列表</span><br><span class="line">var list &#x3D; [1, 2, 3];</span><br><span class="line">&#x2F;&#x2F; 下标从0开始。使用length可以访问list的长度</span><br><span class="line">print(list[0]);</span><br><span class="line">print(list.length);</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 可以使用add添加元素</span><br><span class="line">list.add(5);</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 可在list字面量前添加const关键字，定义一个不可改变的 列表（编译时常量）</span><br><span class="line">var constantList &#x3D; const [1, 2, 3];</span><br><span class="line">constantList[1] &#x3D; 1;     &#x2F;&#x2F; 报错</span><br></pre></td></tr></table></figure>

<p>List 类型包含了很多 List 的操作函数。 更多信息参考 <a href="https://www.dartcn.com/guides/language/language-tour#generics" target="_blank" rel="noopener">泛型</a> 和 <a href="https://www.dartcn.com/guides/libraries/library-tour#collections" target="_blank" rel="noopener">集合</a>.</p>
<h3 id="Set"><a href="#Set" class="headerlink" title="Set"></a>Set</h3><p>在 Dart 中 Set 是一个元素唯一且无需的集合。 Dart 为 Set 提供了 Set 字面量和 <a href="https://api.dartlang.org/stable/dart-core/Set-class.html" target="_blank" rel="noopener">Set</a> 类型。</p>
<p><strong>版本提示：</strong> 虽然 Set <em>类型</em> 一直是 Dart 的核心部分， 但在 Dart2.2 中才引入了 Set <em>字面量</em> 。</p>
<p>下面是通过字面量创建 Set 的一个简单示例：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> halogens = &#123;<span class="string">'fluorine'</span>, <span class="string">'chlorine'</span>, <span class="string">'bromine'</span>, <span class="string">'iodine'</span>, <span class="string">'astatine'</span>&#125;;</span><br></pre></td></tr></table></figure>

<p><strong>Note:</strong> Dart 推断 <code>halogens</code> 类型为 <code>Set</code> 。如果尝试为它添加一个 错误类型的值，分析器或执行时会抛出错误。更多内容，参阅 <a href="https://www.dartcn.com/guides/language/sound-dart#type-inference" target="_blank" rel="noopener">类型推断</a>。</p>
<p>要创建一个空集，使用前面带有类型参数的 <code>{}</code> ，或者将 <code>{}</code> 赋值给 <code>Set</code> 类型的变量：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> names = &lt;<span class="built_in">String</span>&gt;&#123;&#125;;</span><br><span class="line"><span class="comment">// Set&lt;String&gt; names = &#123;&#125;; // 这样也是可以的。</span></span><br><span class="line"><span class="comment">// var names = &#123;&#125;; // 这样会创建一个 Map ，而不是 Set 。</span></span><br></pre></td></tr></table></figure>

<p><strong>是 Set 还是 Map ？</strong> Map 字面量语法同 Set 字面量语法非常相似。 因为先有的 Map 字母量语法，所以 <code>{}</code> 默认是 <code>Map</code> 类型。  如果忘记在 <code>{}</code> 上注释类型或赋值到一个未声明类型的变量上，  那么 Dart 会创建一个类型为 <code>Map</code> 的对象。</p>
<p>使用 <code>add()</code> 或 <code>addAll()</code> 为已有的 Set 添加元素：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> elements = &lt;<span class="built_in">String</span>&gt;&#123;&#125;;</span><br><span class="line">elements.add(<span class="string">'fluorine'</span>);</span><br><span class="line">elements.addAll(halogens);</span><br></pre></td></tr></table></figure>

<p>使用 <code>.length</code> 来获取 Set 中元素的个数：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> elements = &lt;<span class="built_in">String</span>&gt;&#123;&#125;;</span><br><span class="line">elements.add(<span class="string">'fluorine'</span>);</span><br><span class="line">elements.addAll(halogens);</span><br><span class="line"><span class="keyword">assert</span>(elements.length == <span class="number">5</span>);</span><br></pre></td></tr></table></figure>

<p>在 Set 字面量前增加 <code>const</code> ，来创建一个编译时 Set 常量：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> constantSet = <span class="keyword">const</span> &#123;</span><br><span class="line">  <span class="string">'fluorine'</span>,</span><br><span class="line">  <span class="string">'chlorine'</span>,</span><br><span class="line">  <span class="string">'bromine'</span>,</span><br><span class="line">  <span class="string">'iodine'</span>,</span><br><span class="line">  <span class="string">'astatine'</span>,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// constantSet.add('helium'); // Uncommenting this causes an error.</span></span><br></pre></td></tr></table></figure>

<p>更多关于 Set 的内容，参阅 <a href="https://www.dartcn.com/guides/language/language-tour#generics" target="_blank" rel="noopener">Generic</a> 及 <a href="https://www.dartcn.com/guides/libraries/library-tour#sets" target="_blank" rel="noopener">Set</a>。</p>
<h3 id="Map"><a href="#Map" class="headerlink" title="Map"></a>Map</h3><p>通常来说， Map 是用来关联 keys 和 values 的对象。 keys 和 values 可以是任何类型的对象。在一个 Map 对象中一个 <em>key</em> 只能出现一次。 但是 <em>value</em> 可以出现多次。 Dart 中 Map 通过 Map 字面量 和 <a href="https://api.dartlang.org/stable/dart-core/Map-class.html" target="_blank" rel="noopener">Map</a> 类型来实现。</p>
<p>下面是使用 Map 字面量的两个简单例子：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> gifts = &#123;</span><br><span class="line">  <span class="comment">// Key:    Value</span></span><br><span class="line">  <span class="string">'first'</span>: <span class="string">'partridge'</span>,</span><br><span class="line">  <span class="string">'second'</span>: <span class="string">'turtledoves'</span>,</span><br><span class="line">  <span class="string">'fifth'</span>: <span class="string">'golden rings'</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> nobleGases = &#123;</span><br><span class="line">  <span class="number">2</span>: <span class="string">'helium'</span>,</span><br><span class="line">  <span class="number">10</span>: <span class="string">'neon'</span>,</span><br><span class="line">  <span class="number">18</span>: <span class="string">'argon'</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p><strong>提示：</strong> Dart 会将 <code>gifts</code> 的类型推断为 <code>Map</code>， <code>nobleGases</code> 的类型推断为 <code>Map</code> 。 如果尝试在上面的 map 中添加错误类型，那么分析器或者运行时会引发错误。 有关更多信息，请阅读<a href="https://www.dartcn.com/guides/language/sound-dart#type-inference" target="_blank" rel="noopener">类型推断。</a>。</p>
<p>以上 Map 对象也可以使用 Map 构造函数创建：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> gifts = <span class="built_in">Map</span>();</span><br><span class="line">gifts[<span class="string">'first'</span>] = <span class="string">'partridge'</span>;</span><br><span class="line">gifts[<span class="string">'second'</span>] = <span class="string">'turtledoves'</span>;</span><br><span class="line">gifts[<span class="string">'fifth'</span>] = <span class="string">'golden rings'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> nobleGases = <span class="built_in">Map</span>();</span><br><span class="line">nobleGases[<span class="number">2</span>] = <span class="string">'helium'</span>;</span><br><span class="line">nobleGases[<span class="number">10</span>] = <span class="string">'neon'</span>;</span><br><span class="line">nobleGases[<span class="number">18</span>] = <span class="string">'argon'</span>;</span><br></pre></td></tr></table></figure>

<p><strong>提示:</strong> 这里为什么只有 <code>Map()</code> ，而不是使用 <code>new Map()</code>。 因为在 Dart 2 中，<code>new</code> 关键字是可选的。 有关更多信息，参考 <a href="https://www.dartcn.com/guides/language/language-tour#使用构造函数" target="_blank" rel="noopener">构造函数的使用</a>。</p>
<p>类似 JavaScript ，添加 key-value 对到已有的 Map 中：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> gifts = &#123;<span class="string">'first'</span>: <span class="string">'partridge'</span>&#125;;</span><br><span class="line">gifts[<span class="string">'fourth'</span>] = <span class="string">'calling birds'</span>; <span class="comment">// Add a key-value pair</span></span><br></pre></td></tr></table></figure>

<p>类似 JavaScript ，从一个 Map 中获取一个 value：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> gifts = &#123;<span class="string">'first'</span>: <span class="string">'partridge'</span>&#125;;</span><br><span class="line"><span class="keyword">assert</span>(gifts[<span class="string">'first'</span>] == <span class="string">'partridge'</span>);</span><br></pre></td></tr></table></figure>

<p>如果 Map 中不包含所要查找的 key，那么 Map 返回 null：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> gifts = &#123;<span class="string">'first'</span>: <span class="string">'partridge'</span>&#125;;</span><br><span class="line"><span class="keyword">assert</span>(gifts[<span class="string">'fifth'</span>] == <span class="keyword">null</span>);</span><br></pre></td></tr></table></figure>

<p>使用 <code>.length</code> 函数获取当前 Map 中的 key-value 对数量：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> gifts = &#123;<span class="string">'first'</span>: <span class="string">'partridge'</span>&#125;;</span><br><span class="line">gifts[<span class="string">'fourth'</span>] = <span class="string">'calling birds'</span>;</span><br><span class="line"><span class="keyword">assert</span>(gifts.length == <span class="number">2</span>);</span><br></pre></td></tr></table></figure>

<p>创建 Map 类型运行时常量，要在 Map 字面量前加上关键字 <code>const</code>。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> constantMap = <span class="keyword">const</span> &#123;</span><br><span class="line">  <span class="number">2</span>: <span class="string">'helium'</span>,</span><br><span class="line">  <span class="number">10</span>: <span class="string">'neon'</span>,</span><br><span class="line">  <span class="number">18</span>: <span class="string">'argon'</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// constantMap[2] = 'Helium'; // 取消注释会引起错误。</span></span><br></pre></td></tr></table></figure>

<p>舉例來說</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 1.通过字面量创建Map</span><br><span class="line">var gifts &#x3D; &#123;</span><br><span class="line">  &#39;first&#39; : &#39;partridge&#39;,</span><br><span class="line">  &#39;second&#39;: &#39;turtledoves&#39;,</span><br><span class="line">  &#39;fifth&#39; : &#39;golden rings&#39;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 2.使用Map类的构造函数创建对象</span><br><span class="line">var pic &#x3D; new Map();</span><br><span class="line">&#x2F;&#x2F; 往Map中添加键值对</span><br><span class="line">pic[&#39;first&#39;] &#x3D; &#39;partridge&#39;;</span><br><span class="line">pic[&#39;second&#39;] &#x3D; &#39;turtledoves&#39;;</span><br><span class="line">pic[&#39;fifth&#39;] &#x3D; &#39;golden rings&#39;;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 3.获取Map的长度</span><br><span class="line">print(pic.length);</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 4.查找Map</span><br><span class="line">pirnt(pic[&quot;first&quot;]);</span><br><span class="line">print(pic[&quot;four&quot;]);    &#x2F;&#x2F; 键不存在则返回 null</span><br></pre></td></tr></table></figure>

<p>更名多关于 Map 的内容，参考 <a href="https://www.dartcn.com/guides/language/language-tour#generics" target="_blank" rel="noopener">Generics</a> and <a href="https://www.dartcn.com/guides/libraries/library-tour#maps" target="_blank" rel="noopener">Maps</a>.</p>
<h3 id="Rune"><a href="#Rune" class="headerlink" title="Rune"></a>Rune</h3><p>在 Dart 中， Rune 用来表示字符串中的 UTF-32 编码字符。</p>
<p>Unicode 定义了一个全球的书写系统编码， 系统中使用的所有字母，数字和符号都对应唯一的数值编码。 由于 Dart 字符串是一系列 UTF-16 编码单元， 因此要在字符串中表示32位 Unicode 值需要特殊语法支持。</p>
<p>表示 Unicode 编码的常用方法是， <code>\uXXXX</code>, 这里 XXXX 是一个4位的16进制数。 例如，心形符号 (♥) 是 <code>\u2665</code>。 对于特殊的非 4 个数值的情况， 把编码值放到大括号中即可。 例如，emoji 的笑脸 (�) 是 <code>\u{1f600}</code>。</p>
<p><a href="https://api.dartlang.org/stable/dart-core/String-class.html" target="_blank" rel="noopener">String</a> 类有一些属性可以获得 rune 数据。 属性 <code>codeUnitAt</code> 和 <code>codeUnit</code> 返回16位编码数据。 属性 <code>runes</code> 获取字符串中的 Rune 。</p>
<p>下面是示例演示了 Rune 、 16-bit code units、 和 32-bit code points 之间的关系。 点击运行按钮 <img src="https://www.dartcn.com/assets/red-run-50a66e01c7e7a877dbc06e799d5bc4b73c4dace2926ec17b4493d8c3e939c59a.png" alt="img"> 查看 runes 结果。</p>
<iframe src="https://dartpad.cn/embed-inline.html?id=589bc5c95318696cefe5&amp;verticalRatio=65" width="100%" height="333px" style="box-sizing: border-box; color: rgb(33, 37, 41); font-family: Roboto, sans-serif; font-size: 16px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial; border: 1px solid rgb(204, 204, 204);"></iframe>



<p><strong>提示：</strong> 谨慎使用 list 方式操作 Rune 。 这种方法很容易引发崩溃， 具体原因取决于特定的语言，字符集和操作。 有关更多信息，参考 <a href="http://stackoverflow.com/questions/21521729/how-do-i-reverse-a-string-in-dart" target="_blank" rel="noopener">How do I reverse a String in Dart?</a> on Stack Overflow.</p>
<h3 id="Symbol"><a href="#Symbol" class="headerlink" title="Symbol"></a>Symbol</h3><p>一个 Symbol 对象表示 Dart 程序中声明的运算符或者标识符。 你也许永远都不需要使用 Symbol ，但要按名称引用标识符的 API 时， Symbol 就非常有用了。 因为代码压缩后会改变标识符的名称，但不会改变标识符的符号。 通过字面量 Symbol ，也就是标识符前面添加一个 <code>#</code> 号，来获取标识符的 Symbol 。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#radix</span><br><span class="line">#bar</span><br></pre></td></tr></table></figure>

<p>Symbol 字面量是编译时常量。</p>
<h2 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h2><p>Dart 是一门真正面向对象的语言， 甚至其中的函数也是对象，并且有它的类型 <a href="https://api.dartlang.org/stable/dart-core/Function-class.html" target="_blank" rel="noopener">Function</a> 。 这也意味着函数可以被赋值给变量或者作为参数传递给其他函数。 也可以把 Dart 类的实例当做方法来调用。 有关更多信息，参考 <a href="https://www.dartcn.com/guides/language/language-tour#callable-classes" target="_blank" rel="noopener">Callable classes</a>.</p>
<blockquote>
<p>在Dart中，函数（或方法） 也是对象，它的类型是 <code>Function</code>。 这意味着，函数可以赋值给变量，也可以当做其他函数的参数。</p>
</blockquote>
<p>已下是函数实现的示例：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">bool</span> isNoble(<span class="built_in">int</span> atomicNumber) &#123;</span><br><span class="line">  <span class="keyword">return</span> _nobleGases[atomicNumber] != <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">String greet(String name)&#123;</span><br><span class="line">    return &quot;hello,$name&quot;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a href="https://www.dartcn.com/guides/language/effective-dart/design#类型" target="_blank" rel="noopener">我们建议</a> 指定每个函数的参数类型和返回值：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">int fibonacci(int n) &#123;</span><br><span class="line">  if (n &#x3D;&#x3D; 0 || n &#x3D;&#x3D; 1) return n;</span><br><span class="line">  return fibonacci(n - 1) + fibonacci(n - 2);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var result &#x3D; fibonacci(20);</span><br></pre></td></tr></table></figure>

<p>在Dart中，类型是可选，可以省略显式的类型，但仍然建议显式指定类型。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">greet(name)&#123;</span><br><span class="line">    return &quot;hello,$name&quot;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>要注意，函数也是对象，所有函数都有返回值。当没有指定返回值的时候，函数会返回<code>null</code>。当然，如果你强行使用<code>void</code>来修饰函数，则函数真的没有返回值，这种情况就另当别论了。</p>
<p>虽然在 Effective Dart 中推荐 <a href="https://www.dartcn.com/guides/language/effective-dart/design#prefer-type-annotating-public-fields-and-top-level-variables-if-the-type-isnt-obvious" target="_blank" rel="noopener">公共API中声明类型</a>, 但是省略了类型声明，函数依旧是可以正常使用的：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">isNoble(atomicNumber) &#123;</span><br><span class="line">  <span class="keyword">return</span> _nobleGases[atomicNumber] != <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>如果函数中只有一句表达式，可以使用简写语法：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">bool</span> isNoble(<span class="built_in">int</span> atomicNumber) =&gt; _nobleGases[atomicNumber] != <span class="keyword">null</span>;</span><br></pre></td></tr></table></figure>

<p><code>=&gt; *expr*</code> 语法是 <code>{ return *expr*; }</code> 的简写。 <code>=&gt;</code> 符号 有时也被称为 <em>箭头</em> 语法。</p>
<p><code>=&gt;</code>（箭头）语法用于仅包含一条语句的函数。该语法在匿名函数作为函数参数情况中 非常有用。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flybyObjects.where((name) &#x3D;&gt; name.contains(&#39;turn&#39;)).forEach(print);</span><br></pre></td></tr></table></figure>

<p><strong>提示：</strong> 在箭头 (=&gt;) 和分号 (;) 之间只能使用一个 <em>表达式</em> ，不能是 <em>语句</em> 。 例如：不能使用 <a href="https://www.dartcn.com/guides/language/language-tour#if-和-else" target="_blank" rel="noopener">if 语句</a> ，但是可以是用 <a href="https://www.dartcn.com/guides/language/language-tour#conditional-expressions" target="_blank" rel="noopener">条件表达式</a>.</p>
<p>函数有两种参数类型: required 和 optional。 required 类型参数在参数最前面， 随后是 optional 类型参数。 命名的可选参数也可以标记为 “@ required” 。 参考下一章节，了解更多细节。</p>
<h3 id="可选参数"><a href="#可选参数" class="headerlink" title="可选参数"></a>可选参数</h3><p>可选参数可以是命名参数或者位置参数，但一个参数只能选择其中一种方式修饰。</p>
<h4 id="命名可选参数"><a href="#命名可选参数" class="headerlink" title="命名可选参数"></a>命名可选参数</h4><p>调用函数时，可以使用指定命名参数 <code>*paramName*: *value*</code>。 例如：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">enableFlags(bold: <span class="keyword">true</span>, hidden: <span class="keyword">false</span>);</span><br></pre></td></tr></table></figure>

<p>定义函数是，使用 <code>{*param1*, *param2*, …}</code> 来指定命名参数：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/// <span class="markdown">Sets the [bold] and [hidden] flags ...</span></span></span><br><span class="line"><span class="keyword">void</span> enableFlags(&#123;<span class="built_in">bool</span> bold, <span class="built_in">bool</span> hidden&#125;) &#123;...&#125;</span><br></pre></td></tr></table></figure>

<p><a href="https://flutter.io/" target="_blank" rel="noopener">Flutter</a> 创建实例的表达式可能很复杂， 因此窗口小部件构造函数仅使用命名参数。 这样创建实例的表达式更易于阅读。</p>
<p>使用 <a href="https://pub.dartlang.org/documentation/meta/latest/meta/required-constant.html" target="_blank" rel="noopener">@required</a> 注释表示参数是 <em>required</em> 性质的命名参数， 该方式可以在任何 Dart 代码中使用（不仅仅是Flutter）。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Scrollbar(&#123;Key key, <span class="meta">@required</span> Widget child&#125;)</span><br></pre></td></tr></table></figure>

<p>此时 <code>Scrollbar</code> 是一个构造函数， 当 <code>child</code> 参数缺少时，分析器会提示错误。</p>
<p><a href="https://pub.dartlang.org/documentation/meta/latest/meta/required-constant.html" target="_blank" rel="noopener">Required</a> 被定义在 <a href="https://pub.dartlang.org/packages/meta" target="_blank" rel="noopener">meta</a> package。 无论是直接引入（import） <code>package:meta/meta.dart</code> ，或者引入了其他 package，而这个 package 输出（export）了 <code>meta</code>，比如 Flutter 的 <code>package:flutter/material.dart</code>。</p>
<p>舉例來說</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 定义一个函数，参数列表用花括号包裹</span><br><span class="line">enableFlags(&#123;bool bold, bool hidden&#125;) &#123;</span><br><span class="line">    &#x2F;&#x2F; do something</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 调用方式，传参时使用&quot;参数名:值&quot;的形式</span><br><span class="line">enableFlags(hidden:true,bold:false);</span><br></pre></td></tr></table></figure>

<p>如果在定义函数时，给参数列表中的参数设置默认值，则该参数就是可选的，函数调用时可以忽略该参数，使用默认的值。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 定义add函数</span><br><span class="line">add(&#123;int x, int y&#x3D;1, int z&#x3D;0&#125;)&#123;</span><br><span class="line">    print(x + y + z;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 调用</span><br><span class="line">add(x:18);              &#x2F;&#x2F; 19</span><br><span class="line">add(x:18, y:2, z:10);   &#x2F;&#x2F; 30</span><br></pre></td></tr></table></figure>

<p>这里需要注意一下，SDK 1.21之前的版本中，命名参数不能使用<code>=</code>号来设置默认值，而SDK 1.21之后，只能使用<code>=</code>号来设置默认值。因此，请检查并升级SDK版本。</p>
<h4 id="位置可选参数"><a href="#位置可选参数" class="headerlink" title="位置可选参数"></a>位置可选参数</h4><p>将参数放到 <code>[]</code> 中来标记参数是可选的：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">String</span> say(<span class="built_in">String</span> from, <span class="built_in">String</span> msg, [<span class="built_in">String</span> device]) &#123;</span><br><span class="line">  <span class="keyword">var</span> result = <span class="string">'<span class="subst">$from</span> says <span class="subst">$msg</span>'</span>;</span><br><span class="line">  <span class="keyword">if</span> (device != <span class="keyword">null</span>) &#123;</span><br><span class="line">    result = <span class="string">'<span class="subst">$result</span> with a <span class="subst">$device</span>'</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>下面是不使用可选参数调用上面方法 的示例：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">assert</span>(say(<span class="string">'Bob'</span>, <span class="string">'Howdy'</span>) == <span class="string">'Bob says Howdy'</span>);</span><br></pre></td></tr></table></figure>

<p>下面是使用可选参数调用上面方法的示例：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">assert</span>(say(<span class="string">'Bob'</span>, <span class="string">'Howdy'</span>, <span class="string">'smoke signal'</span>) ==</span><br><span class="line">    <span class="string">'Bob says Howdy with a smoke signal'</span>);</span><br></pre></td></tr></table></figure>

<p>舉例來說</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 定义add函数</span><br><span class="line">add(int x, [int y, int z])&#123;</span><br><span class="line">    int result &#x3D; x;</span><br><span class="line">    if (y !&#x3D;  null)&#123;</span><br><span class="line">        result &#x3D; result + y;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    if (z !&#x3D;  null)&#123;</span><br><span class="line">        result &#x3D; result + z;</span><br><span class="line">    &#125;</span><br><span class="line">    print(result);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 调用</span><br><span class="line">add(18);           &#x2F;&#x2F; 18</span><br><span class="line">add(18,12);        &#x2F;&#x2F; 30</span><br><span class="line">add(18,12,15);     &#x2F;&#x2F; 45</span><br></pre></td></tr></table></figure>

<p>给<code>位置可选参数</code>设置默认值</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 定义add函数</span><br><span class="line">add(int x, [int y&#x3D;0, int z&#x3D;0])&#123;</span><br><span class="line">    print(x +ｙ＋ｚ);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>最后需要注意一下<code>命名可选参数</code>与<code>位置可选参数</code>的区别，前者中的参数与顺序无关，无需按顺序传参，且传参数时需使用冒号；后者与顺序相关，传参必须依照顺序。</p>
<h4 id="默认参数值"><a href="#默认参数值" class="headerlink" title="默认参数值"></a>默认参数值</h4><p>在定义方法的时候，可以使用 <code>=</code> 来定义可选参数的默认值。 默认值只能是编译时常量。 如果没有提供默认值，则默认值为 null。</p>
<p>下面是设置可选参数默认值示例：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/// <span class="markdown">设置 [bold] 和 [hidden] 标志 ...</span></span></span><br><span class="line"><span class="keyword">void</span> enableFlags(&#123;<span class="built_in">bool</span> bold = <span class="keyword">false</span>, <span class="built_in">bool</span> hidden = <span class="keyword">false</span>&#125;) &#123;...&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// bold 值为 true; hidden 值为 false.</span></span><br><span class="line">enableFlags(bold: <span class="keyword">true</span>);</span><br></pre></td></tr></table></figure>

<p><strong>不推荐：</strong> 旧版本代码中可能使用的是冒号 (<code>:</code>) 而不是 <code>=</code> 来设置参数默认值。 原因是起初命名参数只支持 <code>:</code> 。 这种支持可能会被弃用。 建议 <strong><a href="https://www.dartcn.com/tools/pub/pubspec#sdk-constraints" target="_blank" rel="noopener">使用 <code>=</code> 指定默认值。</a></strong></p>
<p>下面示例演示了如何为位置参数设置默认值：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">String</span> say(<span class="built_in">String</span> from, <span class="built_in">String</span> msg,</span><br><span class="line">    [<span class="built_in">String</span> device = <span class="string">'carrier pigeon'</span>, <span class="built_in">String</span> mood]) &#123;</span><br><span class="line">  <span class="keyword">var</span> result = <span class="string">'<span class="subst">$from</span> says <span class="subst">$msg</span>'</span>;</span><br><span class="line">  <span class="keyword">if</span> (device != <span class="keyword">null</span>) &#123;</span><br><span class="line">    result = <span class="string">'<span class="subst">$result</span> with a <span class="subst">$device</span>'</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (mood != <span class="keyword">null</span>) &#123;</span><br><span class="line">    result = <span class="string">'<span class="subst">$result</span> (in a <span class="subst">$mood</span> mood)'</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">assert</span>(say(<span class="string">'Bob'</span>, <span class="string">'Howdy'</span>) ==</span><br><span class="line">    <span class="string">'Bob says Howdy with a carrier pigeon'</span>);</span><br></pre></td></tr></table></figure>

<p>list 或 map 可以作为默认值传递。 下面的示例定义了一个方法 <code>doStuff()</code>， 并分别指定参数 <code>list</code> 和 <code>gifts</code> 的默认值。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> doStuff(</span><br><span class="line">    &#123;<span class="built_in">List</span>&lt;<span class="built_in">int</span>&gt; list = <span class="keyword">const</span> [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],</span><br><span class="line">    <span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="built_in">String</span>&gt; gifts = <span class="keyword">const</span> &#123;</span><br><span class="line">      <span class="string">'first'</span>: <span class="string">'paper'</span>,</span><br><span class="line">      <span class="string">'second'</span>: <span class="string">'cotton'</span>,</span><br><span class="line">      <span class="string">'third'</span>: <span class="string">'leather'</span></span><br><span class="line">    &#125;&#125;) &#123;</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">'list:  <span class="subst">$list</span>'</span>);</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">'gifts: <span class="subst">$gifts</span>'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>dart中函数的默认值参数和可选参数和Kotlin中默认值参数和命名参数一致，只是写法上不同而已</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">add3(&#123;<span class="built_in">num</span> a, <span class="built_in">num</span> b, <span class="built_in">num</span> c, <span class="built_in">num</span> d = <span class="number">100</span>&#125;) &#123;<span class="comment">//d就是默认值参数，给的默认值是100</span></span><br><span class="line">   <span class="built_in">print</span>(a + b + c + d);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">main() &#123;</span><br><span class="line">    add3(b: <span class="number">200</span>, a: <span class="number">100</span>, c: <span class="number">800</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>与Kotlin对比</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">add3</span><span class="params">(a: <span class="type">Int</span>, b: <span class="type">Int</span>, c: <span class="type">Int</span>, d: <span class="type">Int</span> = <span class="number">100</span>)</span></span> &#123;</span><br><span class="line">    println(a + b + c + d)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">(args: <span class="type">Array</span>&lt;<span class="type">String</span>&gt;)</span></span> &#123;</span><br><span class="line">    add3(b = <span class="number">200</span>, a = <span class="number">100</span>, c = <span class="number">800</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>歸納一下，函数参数列表传参规则</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;num a, num b, num c, num d 最普通的传参: 调用时，参数个数和参数顺序必须固定</span><br><span class="line">add1(num a, num b, num c, num d) &#123;</span><br><span class="line">  print(a + b + c + d);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;[num a, num b, num c, num d]传参: 调用时，参数个数不固定，但是参数顺序需要一一对应, 不支持命名参数</span><br><span class="line">add2([num a, num b, num c, num d]) &#123;</span><br><span class="line">  print(a + b + c + d);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;&#123;num a, num b, num c, num d&#125;传参: 调用时，参数个数不固定，参数顺序也可以不固定，支持命名参数,也叫可选参数，是dart中的一大特性，这就是为啥Flutter代码那么多可选属性，大量使用可选参数</span><br><span class="line">add3(&#123;num a, num b, num c, num d&#125;) &#123;</span><br><span class="line">  print(a + b + c + d);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;num a, num b, &#123;num c, num d&#125;传参: 调用时，a,b参数个数固定顺序固定，c,d参数个数和顺序也可以不固定</span><br><span class="line">add4(num a, num b, &#123;num c, num d&#125;) &#123;</span><br><span class="line">  print(a + b + c + d);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">main() &#123;</span><br><span class="line">  add1(100, 100, 100, 100); &#x2F;&#x2F;最普通的传参: 调用时，参数个数和参数顺序必须固定</span><br><span class="line">  add2(100, 100); &#x2F;&#x2F;调用时，参数个数不固定，但是参数顺序需要一一对应, 不支持命名参数(也就意味着顺序不变)</span><br><span class="line">  add3(</span><br><span class="line">      b: 200,</span><br><span class="line">      a: 200,</span><br><span class="line">      c: 100,</span><br><span class="line">      d: 100); &#x2F;&#x2F;调用时，参数个数不固定，参数顺序也可以不固定，支持命名参数(也就意味着顺序可变)</span><br><span class="line">  add4(100, 100, d: 100, c: 100); &#x2F;&#x2F;调用时，a,b参数个数固定顺序笃定，c,d参数个数和顺序也可以不固定</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="main-函数"><a href="#main-函数" class="headerlink" title="main() 函数"></a>main() 函数</h3><p>任何应用都必须有一个顶级 <code>main()</code> 函数，作为应用服务的入口。 <code>main()</code> 函数返回值为空，参数为一个可选的 <code>List</code> 。</p>
<p>下面是 web 应用的 <code>main()</code> 函数：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  <span class="built_in">querySelector</span>(<span class="string">'#sample_text_id'</span>)</span><br><span class="line">    ..text = <span class="string">'Click me!'</span></span><br><span class="line">    ..onClick.listen(reverseText);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>提示：</strong></p>
<p>以上代码中的 <code>..</code> 语法为 <a href="https://www.dartcn.com/guides/language/language-tour#cascade-notation-" target="_blank" rel="noopener">级联调用</a> （cascade）。 使用级联调用， 可以简化在一个对象上执行的多个操作。</p>
<p>下面是一个命令行应用的 <code>main()</code> 方法，并且使用了输入参数：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 这样运行应用： dart args.dart 1 test</span></span><br><span class="line"><span class="keyword">void</span> main(<span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; arguments) &#123;</span><br><span class="line">  <span class="built_in">print</span>(arguments);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">assert</span>(arguments.length == <span class="number">2</span>);</span><br><span class="line">  <span class="keyword">assert</span>(<span class="built_in">int</span>.parse(arguments[<span class="number">0</span>]) == <span class="number">1</span>);</span><br><span class="line">  <span class="keyword">assert</span>(arguments[<span class="number">1</span>] == <span class="string">'test'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>使用 <a href="https://pub.dartlang.org/packages/args" target="_blank" rel="noopener">args library</a> 可以定义和解析命令行参数。</p>
<h3 id="函数是一等对象"><a href="#函数是一等对象" class="headerlink" title="函数是一等对象"></a>函数是一等对象</h3><p>一个函数可以作为另一个函数的参数。 例如：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> printElement(<span class="built_in">int</span> element) &#123;</span><br><span class="line">  <span class="built_in">print</span>(element);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> list = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 将 printElement 函数作为参数传递。</span></span><br><span class="line">list.forEach(printElement);</span><br></pre></td></tr></table></figure>

<p>同样可以将一个函数赋值给一个变量，例如：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> loudify = (msg) =&gt; <span class="string">'!!! <span class="subst">$&#123;msg.toUpperCase()&#125;</span> !!!'</span>;</span><br><span class="line"><span class="keyword">assert</span>(loudify(<span class="string">'hello'</span>) == <span class="string">'!!! HELLO !!!'</span>);</span><br></pre></td></tr></table></figure>

<p>示例中使用了匿名函数。 下一章节会有更多介绍。</p>
<p>在dart函数也是一种类型Function,可以作为函数参数传递，也可以作为返回值。类似Kotlin中的FunctionN系列函数。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">main() &#123;</span><br><span class="line">  Function square &#x3D; (a) &#123;</span><br><span class="line">    return a * a;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  Function square2 &#x3D; (a) &#123;</span><br><span class="line">    return a * a * a;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  add(3, 4, square, square2)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">num add(num a, num b, [Function op, Function op2]) &#123;</span><br><span class="line">  &#x2F;&#x2F;函数作为参数传递</span><br><span class="line">  return op(a) + op2(b);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="匿名函数"><a href="#匿名函数" class="headerlink" title="匿名函数"></a>匿名函数</h3><p>多数函数是有名字的， 比如 <code>main()</code> 和 <code>printElement()</code>。 也可以创建没有名字的函数，这种函数被称为 <em>匿名函数*， 有时候也被称为 *lambda</em> 或者 <em>closure</em> 。 匿名函数可以赋值到一个变量中， 举个例子，在一个集合中可以添加或者删除一个匿名函数。</p>
<p>匿名函数和命名函数看起来类似— 在括号之间可以定义一些参数或可选参数，参数使用逗号分割。</p>
<p>后面大括号中的代码为函数体：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">([[*Type*] *param1*[, …]]) &#123; *codeBlock*;&#125;;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>大部分函数都有名字，但我们也可以创建没有名字的函数，称为匿名函数，也被称为lambda表达式或者闭包。</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 定义匿名函数，并将其赋值给一个变量func，注意，函数体最后的花括号处必须有分号结束。</span><br><span class="line">var func &#x3D; (x,y)&#123;</span><br><span class="line">    return x + y;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">print(func(10,11));    &#x2F;&#x2F; 21</span><br></pre></td></tr></table></figure>

<p>注意，匿名函数与普通函数基本相同，也有参数列表，函数体，只是省去了函数名而已。</p>
<p>下面例子中定义了一个包含一个无类型参数 <code>item</code> 的匿名函数。 list 中的每个元素都会调用这个函数，打印元素位置和值的字符串。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> list = [<span class="string">'apples'</span>, <span class="string">'bananas'</span>, <span class="string">'oranges'</span>];</span><br><span class="line">list.forEach((item) &#123;</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">'<span class="subst">$&#123;list.indexOf(item)&#125;</span>: <span class="subst">$item</span>'</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>点击运行按钮 <img src="https://www.dartcn.com/assets/red-run-50a66e01c7e7a877dbc06e799d5bc4b73c4dace2926ec17b4493d8c3e939c59a.png" alt="img"> 执行代码。</p>
<iframe src="https://dartpad.cn/embed-inline.html?id=5d70bc1889d055c7a18d35d77874af88&amp;verticalRatio=60" width="100%" height="250px" style="box-sizing: border-box; color: rgb(33, 37, 41); font-family: Roboto, sans-serif; font-size: 16px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial; border: 1px solid rgb(204, 204, 204);"></iframe>



<p>如果函数只有一条语句， 可以使用箭头简写。粘贴下面代码到 DartPad 中 并点击运行按钮，验证两个函数是等价性。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">list.forEach(</span><br><span class="line">    (item) =&gt; <span class="built_in">print</span>(<span class="string">'<span class="subst">$&#123;list.indexOf(item)&#125;</span>: <span class="subst">$item</span>'</span>));</span><br></pre></td></tr></table></figure>

<h3 id="箭頭函數"><a href="#箭頭函數" class="headerlink" title="箭頭函數"></a>箭頭函數</h3><blockquote>
<p>Dart中的箭头函数与JavaScript中的基本相同。当函数体中只包含一个语句时，我们就可以使用<code>=&gt;</code>箭头语法进行缩写。注意，箭头函数仅仅只是一个简洁表达的语法糖。</p>
</blockquote>
<p>普通函数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">add(num x, num y)&#123;</span><br><span class="line">    return x + y;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">print(add(18,12));    &#x2F;&#x2F; 30</span><br></pre></td></tr></table></figure>

<p>箭头函数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 与上面的普通函数完全等价</span><br><span class="line">add(num x, num y) &#x3D;&gt; x + y;</span><br><span class="line"></span><br><span class="line">print(add(18,12));    &#x2F;&#x2F; 30</span><br></pre></td></tr></table></figure>

<p>箭头函数省略了花括号的表达，箭头后面跟一个表达式，函数的返回值也就是这个表达式的值。另外，箭头函数也可以与匿名函数结合，形成匿名箭头函数。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var func &#x3D; (num x, num y) &#x3D;&gt; x + y;</span><br></pre></td></tr></table></figure>

<p>舉例來說</p>
<p>在dart中的如果在函数体内只有一个表达式，那么就可以使用箭头函数来简化代码，这点也和Kotlin类似，只不过在Kotlin中人家叫lambda表达式，只是写法上不一样而已。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">add4(<span class="built_in">num</span> a, <span class="built_in">num</span> b, &#123;<span class="built_in">num</span> c, <span class="built_in">num</span> d&#125;) &#123;</span><br><span class="line">  <span class="built_in">print</span>(a + b + c + d);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">add5(<span class="built_in">num</span> a, <span class="built_in">num</span> b, &#123;<span class="built_in">num</span> c, <span class="built_in">num</span> d&#125;)  =&gt;  <span class="built_in">print</span>(a + b + c + d);</span><br></pre></td></tr></table></figure>



<h3 id="词法作用域"><a href="#词法作用域" class="headerlink" title="词法作用域"></a>词法作用域</h3><p>Dart 是一门词法作用域的编程语言，就意味着变量的作用域是固定的， 简单说变量的作用域在编写代码的时候就已经确定了。 花括号内的是变量可见的作用域。</p>
<p>下面示例关于多个嵌套函数的变量作用域：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">bool</span> topLevel = <span class="keyword">true</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  <span class="keyword">var</span> insideMain = <span class="keyword">true</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">void</span> myFunction() &#123;</span><br><span class="line">    <span class="keyword">var</span> insideFunction = <span class="keyword">true</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">void</span> nestedFunction() &#123;</span><br><span class="line">      <span class="keyword">var</span> insideNestedFunction = <span class="keyword">true</span>;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">assert</span>(topLevel);</span><br><span class="line">      <span class="keyword">assert</span>(insideMain);</span><br><span class="line">      <span class="keyword">assert</span>(insideFunction);</span><br><span class="line">      <span class="keyword">assert</span>(insideNestedFunction);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注意 <code>nestedFunction()</code> 可以访问所有的变量， 一直到顶级作用域变量。</p>
<h3 id="词法闭包"><a href="#词法闭包" class="headerlink" title="词法闭包"></a>词法闭包</h3><p><em>闭包</em> 即一个函数对象，即使函数对象的调用在它原始作用域之外， 依然能够访问在它词法作用域内的变量。</p>
<p>函数可以封闭定义到它作用域内的变量。 接下来的示例中， <code>makeAdder()</code> 捕获了变量 <code>addBy</code>。 无论在什么时候执行返回函数，函数都会使用捕获的 <code>addBy</code> 变量。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/// <span class="markdown">返回一个函数，返回的函数参数与 [addBy] 相加。</span></span></span><br><span class="line"><span class="built_in">Function</span> makeAdder(<span class="built_in">num</span> addBy) &#123;</span><br><span class="line">  <span class="keyword">return</span> (<span class="built_in">num</span> i) =&gt; addBy + i;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  <span class="comment">// 创建一个加 2 的函数。</span></span><br><span class="line">  <span class="keyword">var</span> add2 = makeAdder(<span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 创建一个加 4 的函数。</span></span><br><span class="line">  <span class="keyword">var</span> add4 = makeAdder(<span class="number">4</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">assert</span>(add2(<span class="number">3</span>) == <span class="number">5</span>);</span><br><span class="line">  <span class="keyword">assert</span>(add4(<span class="number">3</span>) == <span class="number">7</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="测试函数是否相等"><a href="#测试函数是否相等" class="headerlink" title="测试函数是否相等"></a>测试函数是否相等</h3><p>下面是顶级函数，静态方法和示例方法相等性的测试示例：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> foo() &#123;&#125; <span class="comment">// 顶级函数</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">void</span> bar() &#123;&#125; <span class="comment">// 静态方法</span></span><br><span class="line">  <span class="keyword">void</span> baz() &#123;&#125; <span class="comment">// 示例方法</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  <span class="keyword">var</span> x;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 比较顶级函数。</span></span><br><span class="line">  x = foo;</span><br><span class="line">  <span class="keyword">assert</span>(foo == x);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 比较静态方法。</span></span><br><span class="line">  x = A.bar;</span><br><span class="line">  <span class="keyword">assert</span>(A.bar == x);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 比较实例方法。</span></span><br><span class="line">  <span class="keyword">var</span> v = A(); <span class="comment">// A的1号实例</span></span><br><span class="line">  <span class="keyword">var</span> w = A(); <span class="comment">// A的2号实例</span></span><br><span class="line">  <span class="keyword">var</span> y = w;</span><br><span class="line">  x = w.baz;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 两个闭包引用的同一实例（2号）,</span></span><br><span class="line">  <span class="comment">// 所以它们相等。</span></span><br><span class="line">  <span class="keyword">assert</span>(y.baz == x);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 两个闭包引用的非同一个实例，</span></span><br><span class="line">  <span class="comment">// 所以它们不相等。</span></span><br><span class="line">  <span class="keyword">assert</span>(v.baz != w.baz);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="返回值"><a href="#返回值" class="headerlink" title="返回值"></a>返回值</h3><p>所有函数都会返回一个值。 如果没有明确指定返回值， 函数体会被隐式的添加 <code>return null;</code> 语句。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">foo() &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">assert</span>(foo() == <span class="keyword">null</span>);</span><br></pre></td></tr></table></figure>

<h2 id="运算符"><a href="#运算符" class="headerlink" title="运算符"></a>运算符</h2><p>下表是 Dart 定义的运算符。 多数运算符可以被重载，详情参考 <a href="https://www.dartcn.com/guides/language/language-tour#重写运算符" target="_blank" rel="noopener">重写运算符</a>。</p>
<table>
<thead>
<tr>
<th>Description</th>
<th>Operator</th>
</tr>
</thead>
<tbody><tr>
<td>unary postfix</td>
<td><code>*expr*++</code>  <code>*expr*--</code>  <code>()</code>  <code>[]</code>  <code>.</code>  <code>?.</code></td>
</tr>
<tr>
<td>unary prefix</td>
<td><code>-*expr*</code>  <code>!*expr*</code>  <code>~*expr*</code>  <code>++*expr*</code>  <code>--*expr*</code></td>
</tr>
<tr>
<td>multiplicative</td>
<td><code>*</code>  <code>/</code>  <code>%</code> <code>~/</code></td>
</tr>
<tr>
<td>additive</td>
<td><code>+</code>  <code>-</code></td>
</tr>
<tr>
<td>shift</td>
<td><code>&lt;&lt;</code>  <code>&gt;&gt;</code>  <code>&gt;&gt;&gt;</code></td>
</tr>
<tr>
<td>bitwise AND</td>
<td><code>&amp;</code></td>
</tr>
<tr>
<td>bitwise XOR</td>
<td><code>^</code></td>
</tr>
<tr>
<td>bitwise OR</td>
<td>`</td>
</tr>
<tr>
<td>relational and type test</td>
<td><code>&gt;=</code>  <code>&gt;</code>  <code>&lt;=</code>  <code>&lt;</code>  <code>as</code>  <code>is</code>  <code>is!</code></td>
</tr>
<tr>
<td>equality</td>
<td><code>==</code>  <code>!=</code></td>
</tr>
<tr>
<td>logical AND</td>
<td><code>&amp;&amp;</code></td>
</tr>
<tr>
<td>logical OR</td>
<td>`</td>
</tr>
<tr>
<td>if null</td>
<td><code>??</code></td>
</tr>
<tr>
<td>conditional</td>
<td><code>*expr1* ? *expr2* : *expr3*</code></td>
</tr>
<tr>
<td>cascade</td>
<td><code>..</code></td>
</tr>
<tr>
<td>assignment</td>
<td><code>=</code>  <code>*=</code>  <code>/=</code>  <code>+=</code>  <code>-=</code>  <code>&amp;=</code>  <code>^=</code>  <em>etc.</em></td>
</tr>
</tbody></table>
<p><strong>提示：</strong> 上述表格中描述的运算符优先级近似于Dart 解析器实际行为。 更准确的描述，请参阅 <a href="https://www.dartcn.com/guides/language/spec" target="_blank" rel="noopener">Dart language specification</a> 中的语法。</p>
<p>创建表达式的时候会用到运算符。 下面是一些运算符表达式的实例：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">a++</span><br><span class="line">a + b</span><br><span class="line">a = b</span><br><span class="line">a == b</span><br><span class="line">c ? a : b</span><br><span class="line">a <span class="keyword">is</span> T</span><br></pre></td></tr></table></figure>

<p>在 <a href="https://www.dartcn.com/guides/language/language-tour#operators" target="_blank" rel="noopener">运算符表</a> 中， 每一行的运算符优先级，由上到下依次排列，第一行优先级最高，最后一行优先级最低。 例如 <code>%</code> 运算符优先级高于 <code>==</code> ， 而 <code>==</code> 高于 <code>&amp;&amp;</code>。 根据优先级规则，那么意味着以下两行代码执行的方式相同：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 括号可以提高可读性。</span></span><br><span class="line"><span class="keyword">if</span> ((n % i == <span class="number">0</span>) &amp;&amp; (d % i == <span class="number">0</span>)) ...</span><br><span class="line"></span><br><span class="line"><span class="comment">// 可读性差，但是是等效的。</span></span><br><span class="line"><span class="keyword">if</span> (n % i == <span class="number">0</span> &amp;&amp; d % i == <span class="number">0</span>) ...</span><br></pre></td></tr></table></figure>

<p><strong>警告：</strong> 对于有两个操作数的运算符，运算符的功能由左边的操作数决定。 例如, 如果有两个操作数 Vector 和 Point， <code>aVector + aPoint</code> 使用的是 Vector 中定义的 + 运算符。</p>
<h3 id="算术运算符"><a href="#算术运算符" class="headerlink" title="算术运算符"></a>算术运算符</h3><p>Dart 支持常用的运算运算符，如下表所示：</p>
<table>
<thead>
<tr>
<th>Operator</th>
<th>運算符</th>
<th>Meaning</th>
<th>Example</th>
</tr>
</thead>
<tbody><tr>
<td><code>+</code></td>
<td>加</td>
<td>Add</td>
<td>result = 1 + 1;</td>
</tr>
<tr>
<td><code>–</code></td>
<td>減</td>
<td>Subtract</td>
<td>result = 5 - 1;</td>
</tr>
<tr>
<td><code>-*expr*</code></td>
<td></td>
<td>Unary minus, also known as negation (reverse the sign of the expression)</td>
<td></td>
</tr>
<tr>
<td><code>*</code></td>
<td>乘</td>
<td>Multiply</td>
<td>result = 3 * 5;</td>
</tr>
<tr>
<td><code>/</code></td>
<td>除</td>
<td>Divide</td>
<td>result = 3 / 5; <a href="https://link.zhihu.com/?target=https%3A//0.0.0.6/">//0.6</a></td>
</tr>
<tr>
<td><code>~/</code></td>
<td>整除</td>
<td>Divide, returning an integer result</td>
<td>result = 3 ~/ 5; //0</td>
</tr>
<tr>
<td><code>%</code></td>
<td>餘數</td>
<td>Get the remainder of an integer division (modulo)</td>
<td>result = 5 % 3; //2</td>
</tr>
</tbody></table>
<p>示例：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">assert</span>(<span class="number">2</span> + <span class="number">3</span> == <span class="number">5</span>);</span><br><span class="line"><span class="keyword">assert</span>(<span class="number">2</span> - <span class="number">3</span> == <span class="number">-1</span>);</span><br><span class="line"><span class="keyword">assert</span>(<span class="number">2</span> * <span class="number">3</span> == <span class="number">6</span>);</span><br><span class="line"><span class="keyword">assert</span>(<span class="number">5</span> / <span class="number">2</span> == <span class="number">2.5</span>); <span class="comment">// 结果是双浮点型</span></span><br><span class="line"><span class="keyword">assert</span>(<span class="number">5</span> ~/ <span class="number">2</span> == <span class="number">2</span>); <span class="comment">// 结果是整型</span></span><br><span class="line"><span class="keyword">assert</span>(<span class="number">5</span> % <span class="number">2</span> == <span class="number">1</span>); <span class="comment">// 余数</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">assert</span>(<span class="string">'5/2 = <span class="subst">$&#123;<span class="number">5</span> ~/ <span class="number">2</span>&#125;</span> r <span class="subst">$&#123;<span class="number">5</span> % <span class="number">2</span>&#125;</span>'</span> == <span class="string">'5/2 = 2 r 1'</span>);</span><br></pre></td></tr></table></figure>

<p>Dart 还支持前缀和后缀，自增和自减运算符。</p>
<table>
<thead>
<tr>
<th>Operator</th>
<th>Meaning</th>
</tr>
</thead>
<tbody><tr>
<td><code>++*var*</code></td>
<td><code>*var* = *var* + 1</code> (expression value is <code>*var* + 1</code>)</td>
</tr>
<tr>
<td><code>*var*++</code></td>
<td><code>*var* = *var* + 1</code> (expression value is <code>*var*</code>)</td>
</tr>
<tr>
<td><code>--*var*</code></td>
<td><code>*var* = *var* – 1</code> (expression value is <code>*var* – 1</code>)</td>
</tr>
<tr>
<td><code>*var*--</code></td>
<td><code>*var* = *var* – 1</code> (expression value is <code>*var*</code>)</td>
</tr>
</tbody></table>
<p>示例：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a, b;</span><br><span class="line"></span><br><span class="line">a = <span class="number">0</span>;</span><br><span class="line">b = ++a; <span class="comment">// a自加后赋值给b。</span></span><br><span class="line"><span class="keyword">assert</span>(a == b); <span class="comment">// 1 == 1</span></span><br><span class="line"></span><br><span class="line">a = <span class="number">0</span>;</span><br><span class="line">b = a++; <span class="comment">// a先赋值给b后，a自加。</span></span><br><span class="line"><span class="keyword">assert</span>(a != b); <span class="comment">// 1 != 0</span></span><br><span class="line"></span><br><span class="line">a = <span class="number">0</span>;</span><br><span class="line">b = --a; <span class="comment">// a自减后赋值给b。</span></span><br><span class="line"><span class="keyword">assert</span>(a == b); <span class="comment">// -1 == -1</span></span><br><span class="line"></span><br><span class="line">a = <span class="number">0</span>;</span><br><span class="line">b = a--; <span class="comment">// a先赋值给b后，a自减。</span></span><br><span class="line"><span class="keyword">assert</span>(a != b); <span class="comment">// -1 != 0</span></span><br></pre></td></tr></table></figure>

<h3 id="关系运算符"><a href="#关系运算符" class="headerlink" title="关系运算符"></a>关系运算符</h3><p>下表列出了关系运算符及含义：</p>
<table>
<thead>
<tr>
<th>Operator</th>
<th>運算符</th>
<th>Meaning</th>
<th>Example</th>
</tr>
</thead>
<tbody><tr>
<td><code>==</code></td>
<td>等于</td>
<td>Equal; see discussion below</td>
<td>1 == 1</td>
</tr>
<tr>
<td><code>!=</code></td>
<td>不等于</td>
<td>Not equal</td>
<td>3 != 4</td>
</tr>
<tr>
<td><code>&gt;</code></td>
<td>大于</td>
<td>Greater than</td>
<td>2 &gt; 1</td>
</tr>
<tr>
<td><code>&lt;</code></td>
<td>小于</td>
<td>Less than</td>
<td>1 &lt; 2</td>
</tr>
<tr>
<td><code>&gt;=</code></td>
<td>大于等于</td>
<td>Greater than or equal to</td>
<td>5&gt;=4</td>
</tr>
<tr>
<td><code>&lt;=</code></td>
<td>小于等于</td>
<td>Less than or equal to</td>
<td>4 &lt;= 5</td>
</tr>
</tbody></table>
<p>要测试两个对象x和y是否表示相同的事物， 使用 <code>==</code> 运算符。 (在极少数情况下， 要确定两个对象是否完全相同，需要使用 <a href="https://api.dartlang.org/stable/dart-core/identical.html" target="_blank" rel="noopener">identical()</a> 函数。) 下面给出 <code>==</code> 运算符的工作原理：</p>
<ol>
<li>如果 <em>x</em> 或 <em>y</em> 可以 null，都为 null 时返回 true ，其中一个为 null 时返回 false。</li>
<li>结果为函数 <code>*x*.==(*y*)</code> 的返回值。 (如上所见, <code>==</code> 运算符执行的是第一个运算符的函数。 我们甚至可以重写很多运算符，包括 <code>==</code>， 运算符的重写，参考 <a href="https://www.dartcn.com/guides/language/language-tour#重写运算符" target="_blank" rel="noopener">重写运算符</a>。）</li>
</ol>
<p>这里列出了每种关系运算符的示例：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">assert</span>(<span class="number">2</span> == <span class="number">2</span>);</span><br><span class="line"><span class="keyword">assert</span>(<span class="number">2</span> != <span class="number">3</span>);</span><br><span class="line"><span class="keyword">assert</span>(<span class="number">3</span> &gt; <span class="number">2</span>);</span><br><span class="line"><span class="keyword">assert</span>(<span class="number">2</span> &lt; <span class="number">3</span>);</span><br><span class="line"><span class="keyword">assert</span>(<span class="number">3</span> &gt;= <span class="number">3</span>);</span><br><span class="line"><span class="keyword">assert</span>(<span class="number">2</span> &lt;= <span class="number">3</span>);</span><br></pre></td></tr></table></figure>

<h3 id="类型判定运算符"><a href="#类型判定运算符" class="headerlink" title="类型判定运算符"></a>类型判定运算符</h3><p><code>as</code>， <code>is</code>， 和 <code>is!</code> 运算符用于在运行时处理类型检查：</p>
<table>
<thead>
<tr>
<th>Operator</th>
<th>Meaning</th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td><code>as</code></td>
<td>Typecast (也被用于<a href="https://www.dartcn.com/guides/language/language-tour#指定库前缀" target="_blank" rel="noopener">指定库前缀</a>)</td>
<td>用于类型转换</td>
</tr>
<tr>
<td><code>is</code></td>
<td>True if the object has the specified type</td>
<td>如果对象是指定的类型就返回 True</td>
</tr>
<tr>
<td><code>is!</code></td>
<td>False if the object has the specified type</td>
<td>如果对象不是指定的类型返回 True</td>
</tr>
</tbody></table>
<p>例如， <code>obj is Object</code> 总是 true。 但是只有 <code>obj</code> 实现了 <code>T</code> 的接口时， <code>obj is T</code> 才是 true。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 将emp转换为Person类型再操作</span><br><span class="line">(emp as Person).firstName &#x3D; &#39;Bob&#39;;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>Dart中使用 <code>as</code> 操作符把对象转换为特定的类型，如无法转换则会抛出异常，因此在转换前最好使用<code>is</code>运算符进行检测。</p>
</blockquote>
<p>使用 <code>as</code> 运算符将对象强制转换为特定类型。 通常，可以认为是 <code>is</code> 类型判定后，被判定对象调用函数的一种缩写形式。 请考虑以下代码：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (emp <span class="keyword">is</span> Person) &#123;</span><br><span class="line">  <span class="comment">// Type check</span></span><br><span class="line">  emp.firstName = <span class="string">'Bob'</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>使用 <code>as</code> 运算符进行缩写：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(emp <span class="keyword">as</span> Person).firstName = <span class="string">'Bob'</span>;</span><br></pre></td></tr></table></figure>

<p><strong>提示：</strong> 以上代码并不是等价的。 如果 <code>emp</code> 为 null 或者不是 Person 对象， 那么第一个 <code>is</code> 的示例，后面将不回执行； 第二个 <code>as</code> 的示例会抛出异常。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">main() &#123;</span><br><span class="line">    int number &#x3D; 100;</span><br><span class="line">    double distance &#x3D; 200.5;</span><br><span class="line">    num age &#x3D; 18;</span><br><span class="line">    print(number is num);&#x2F;&#x2F;true</span><br><span class="line">    print(distance is! int);&#x2F;&#x2F;true</span><br><span class="line">    print(age as int);&#x2F;&#x2F;18</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="赋值运算符"><a href="#赋值运算符" class="headerlink" title="赋值运算符"></a>赋值运算符</h3><p>使用 <code>=</code> 为变量赋值。 使用 <code>??=</code> 运算符时，只有当被赋值的变量为 null 时才会赋值给它。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 将值赋值给变量a</span></span><br><span class="line">a = value;</span><br><span class="line"><span class="comment">// 如果b为空时，将变量赋值给b，否则，b的值保持不变。</span></span><br><span class="line">b ??= value;</span><br></pre></td></tr></table></figure>

<p>复合赋值运算符（如 <code>+=</code> ）将算术运算符和赋值运算符组合在了一起。</p>
<table>
<thead>
<tr>
<th><code>=</code></th>
<th><code>–=</code></th>
<th><code>/=</code></th>
<th><code>%=</code></th>
<th><code>&gt;&gt;=</code></th>
<th><code>^=</code></th>
</tr>
</thead>
<tbody><tr>
<td><code>+=</code></td>
<td><code>*=</code></td>
<td><code>~/=</code></td>
<td><code>&lt;&lt;=</code></td>
<td><code>&amp;=</code></td>
<td>`</td>
</tr>
</tbody></table>
<p>以下说明复合赋值运算符的作用：</p>
<table>
<thead>
<tr>
<th></th>
<th>Compound assignment</th>
<th>Equivalent expression</th>
</tr>
</thead>
<tbody><tr>
<td><strong>For an operator *op*:</strong></td>
<td><code>a *op*= b</code></td>
<td><code>a = a *op* b</code></td>
</tr>
<tr>
<td><strong>Example:</strong></td>
<td><code>a += b</code></td>
<td><code>a = a + b</code></td>
</tr>
</tbody></table>
<p>以下示例使用赋值和复合赋值运算符：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">2</span>; <span class="comment">// 使用 = 复制</span></span><br><span class="line">a *= <span class="number">3</span>; <span class="comment">// 复制并做乘法运算： a = a * 3</span></span><br><span class="line"><span class="keyword">assert</span>(a == <span class="number">6</span>);</span><br></pre></td></tr></table></figure>

<h3 id="逻辑运算符"><a href="#逻辑运算符" class="headerlink" title="逻辑运算符"></a>逻辑运算符</h3><p>逻辑操作符可以反转或组合布尔表达式。</p>
<table>
<thead>
<tr>
<th>Operator</th>
<th>操作符</th>
<th>Meaning</th>
</tr>
</thead>
<tbody><tr>
<td><code>!*expr*</code></td>
<td>非</td>
<td>inverts the following expression (changes false to true, and vice versa)</td>
</tr>
<tr>
<td>`</td>
<td></td>
<td>`</td>
</tr>
<tr>
<td><code>&amp;&amp;</code></td>
<td>与</td>
<td>logical AND</td>
</tr>
</tbody></table>
<p>下面是关于逻辑表达式的示例：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (!done &amp;&amp; (col == <span class="number">0</span> || col == <span class="number">3</span>)) &#123;</span><br><span class="line">  <span class="comment">// ...Do something...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="按位和移位运算符"><a href="#按位和移位运算符" class="headerlink" title="按位和移位运算符"></a>按位和移位运算符</h3><p>在 Dart 中，可以单独操作数字的某一位。 通常情况下整数类型使用按位和移位运算符来操作。</p>
<table>
<thead>
<tr>
<th>Operator</th>
<th>運算符</th>
<th>Meaning</th>
</tr>
</thead>
<tbody><tr>
<td><code>&amp;</code></td>
<td>位与</td>
<td>AND</td>
</tr>
<tr>
<td>`</td>
<td>`</td>
<td>位或</td>
</tr>
<tr>
<td><code>^</code></td>
<td>异或</td>
<td>XOR</td>
</tr>
<tr>
<td><code>~*expr*</code></td>
<td>位非</td>
<td>Unary bitwise complement (0s become 1s; 1s become 0s)</td>
</tr>
<tr>
<td><code>&lt;&lt;</code></td>
<td>左移</td>
<td>Shift left</td>
</tr>
<tr>
<td><code>&gt;&gt;</code></td>
<td>右移</td>
<td>Shift right</td>
</tr>
</tbody></table>
<p>下面是关于按位和移位运算符的示例：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> value = <span class="number">0x22</span>;</span><br><span class="line"><span class="keyword">final</span> bitmask = <span class="number">0x0f</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">assert</span>((value &amp; bitmask) == <span class="number">0x02</span>); <span class="comment">// AND</span></span><br><span class="line"><span class="keyword">assert</span>((value &amp; ~bitmask) == <span class="number">0x20</span>); <span class="comment">// AND NOT</span></span><br><span class="line"><span class="keyword">assert</span>((value | bitmask) == <span class="number">0x2f</span>); <span class="comment">// OR</span></span><br><span class="line"><span class="keyword">assert</span>((value ^ bitmask) == <span class="number">0x2d</span>); <span class="comment">// XOR</span></span><br><span class="line"><span class="keyword">assert</span>((value &lt;&lt; <span class="number">4</span>) == <span class="number">0x220</span>); <span class="comment">// Shift left</span></span><br><span class="line"><span class="keyword">assert</span>((value &gt;&gt; <span class="number">4</span>) == <span class="number">0x02</span>); <span class="comment">// Shift right</span></span><br></pre></td></tr></table></figure>



<h3 id="条件表达式"><a href="#条件表达式" class="headerlink" title="条件表达式"></a>条件表达式</h3><blockquote>
<p>在Java中很容易碰到恼人的空指针错误，因此在方法调用前需要进行对象的非空判断，这样的判断语句使代码变得冗长，可读性差，不整洁。Dart中则发明了一个新的运算符用于处理此类情况。</p>
</blockquote>
<p>Dart有两个运算符，有时可以替换 <a href="https://www.dartcn.com/guides/language/language-tour#if-和-else" target="_blank" rel="noopener">if-else</a> 表达式， 让表达式更简洁：</p>
<ul>
<li><p><code>*condition* ? *expr1* : *expr2*</code></p>
<p>如果条件为 true, 执行 <em>expr1</em> (并返回它的值)： 否则, 执行并返回 <em>expr2</em> 的值。</p>
</li>
<li><p><code>*expr1* ?? *expr2*</code></p>
<p>如果 <em>expr1</em> 是 non-null， 返回 <em>expr1</em> 的值； 否则, 执行并返回 <em>expr2</em> 的值。</p>
</li>
</ul>
<table>
<thead>
<tr>
<th>操作符</th>
<th>解释</th>
</tr>
</thead>
<tbody><tr>
<td>result = expr1 ?? expr2</td>
<td>若expr1为null, 返回expr2的值，否则返回expr1的值</td>
</tr>
<tr>
<td>expr1 ??= expr2</td>
<td>若expr1为null, 则把expr2的值赋值给expr1</td>
</tr>
<tr>
<td>result = expr1?.value</td>
<td>若expr1为null, 就返回null,否则就返回expr1.value的值</td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
</tbody></table>
<h4 id="result-condition-expr1-expr2"><a href="#result-condition-expr1-expr2" class="headerlink" title="result = condition ? expr1 : expr2"></a>result = <em>condition</em> ? <em>expr1</em> : <em>expr2</em></h4><p>如果赋值是根据布尔值， 考虑使用 <code>?:</code>。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> visibility = isPublic ? <span class="string">'public'</span> : <span class="string">'private'</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var isOpened &#x3D; (value &#x3D;&#x3D; 1) ? true : false;</span><br></pre></td></tr></table></figure>



<h4 id="result-expr1-expr2"><a href="#result-expr1-expr2" class="headerlink" title="result = expr1 ?? expr2"></a><strong>result = expr1 ?? expr2</strong></h4><p>如果赋值是基于判定是否为 null， 考虑使用 <code>??</code>。</p>
<p>如果发现expr1为null,就返回expr2的值，否则就返回expr1的值, 这个类似于Kotlin中的 <strong>result = expr1 ?: expr2</strong></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">String</span> playerName(<span class="built_in">String</span> name) =&gt; name ?? <span class="string">'Guest'</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">main() &#123;</span><br><span class="line">    var choice &#x3D; question.choice ?? &#39;A&#39;;</span><br><span class="line">    &#x2F;&#x2F;等价于</span><br><span class="line">    var choice2;</span><br><span class="line">    if(question.choice &#x3D;&#x3D; null) &#123;</span><br><span class="line">        choice2 &#x3D; &#39;A&#39;;</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        choice2 &#x3D; question.choice;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var str1 &#x3D;  &quot;Hello&quot;;</span><br><span class="line">var str2 &#x3D;  &quot;world&quot;;</span><br><span class="line">var result &#x3D; str1 ?? str2.toUpperCase();</span><br></pre></td></tr></table></figure>



<h4 id="expr1-expr2"><a href="#expr1-expr2" class="headerlink" title="expr1 ??= expr2**"></a>expr1 ??= expr2**</h4><p>等价于 <strong>expr1 = expr1 ?? expr2</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">main() &#123;</span><br><span class="line">    var choice ??&#x3D; &#39;A&#39;;</span><br><span class="line">    &#x2F;&#x2F;等价于</span><br><span class="line">    if(choice &#x3D;&#x3D; null) &#123;</span><br><span class="line">        choice &#x3D; &#39;A&#39;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="result-expr1-value"><a href="#result-expr1-value" class="headerlink" title="result = expr1?.value"></a><strong>result = expr1?.value</strong></h4><p>如果expr1不为null就返回expr1.value，否则就会返回null, 类似Kotlin中的 ?. 如果expr1不为null,就执行后者</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> choice = question?.choice;   <span class="comment">//等价于  </span></span><br><span class="line"><span class="keyword">if</span>(question == <span class="keyword">null</span>)&#123;</span><br><span class="line">   <span class="keyword">return</span> <span class="keyword">null</span>;   </span><br><span class="line">&#125; <span class="keyword">else</span> &#123;       </span><br><span class="line">   <span class="keyword">return</span> question.choice;   </span><br><span class="line">&#125;</span><br><span class="line">question?.commit();   <span class="comment">//等价于   </span></span><br><span class="line"><span class="keyword">if</span>(question == <span class="keyword">null</span>)&#123;       </span><br><span class="line">   <span class="keyword">return</span>;<span class="comment">//不执行commit()   </span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;       </span><br><span class="line">  question.commit();<span class="comment">//执行commit方法  </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<p>下面给出了其他两种实现方式， 但并不简洁：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Slightly longer version uses ?: operator.</span></span><br><span class="line"><span class="built_in">String</span> playerName(<span class="built_in">String</span> name) =&gt; name != <span class="keyword">null</span> ? name : <span class="string">'Guest'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Very long version uses if-else statement.</span></span><br><span class="line"><span class="built_in">String</span> playerName(<span class="built_in">String</span> name) &#123;</span><br><span class="line">  <span class="keyword">if</span> (name != <span class="keyword">null</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> name;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">'Guest'</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>舉例來說</p>
<p>如果expr1的值不等于<code>null</code>，则返回其值； 否则执行表达式expr2并返回其结果。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var str1 &#x3D;  &quot;Hello&quot;;</span><br><span class="line">var str2 &#x3D;  &quot;world&quot;;</span><br><span class="line">var result &#x3D; str1 ?? str2.toUpperCase();</span><br></pre></td></tr></table></figure>

<p>舉個實例</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">void main() &#123;</span><br><span class="line">  var numbers &#x3D; [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11];</span><br><span class="line">  for (var i &#x3D; 0; i &lt; numbers.length; i++) &#123;</span><br><span class="line">      num targetNumber &#x3D; numbers[i].isEven ? numbers[i] * 2 : numbers[i] + 4;</span><br><span class="line">      print(targetNumber);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="级联运算符"><a href="#级联运算符" class="headerlink" title="级联运算符 (..)"></a>级联运算符 (..)</h3><p>级联运算符 (<code>..</code>) 可以实现对同一个对像进行一系列的操作。 除了调用函数， 还可以访问同一对象上的字段属性。 这通常可以节省创建临时变量的步骤， 同时编写出更流畅的代码。</p>
<blockquote>
<p>我们通常使用<code>.</code>操作符调用对象的方法，这在Dart中也是支持的，但是Dart另外增加了一种级联运算符<code>..</code>，用两个点表示。</p>
</blockquote>
<p>假如类Person有三个方法，<code>setName</code>、<code>setAge</code>、<code>save</code>，则可如下调用</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">new Person()..setName(&quot;Bob&quot;)..setAge(20)..save();</span><br></pre></td></tr></table></figure>

<p>使用<code>级联运算符</code>调用方法，无需该方法返回对象本身即可连续的流式的调用该对象的其他方法。</p>
<p>再考虑一下代码：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">querySelector</span>(<span class="string">'#confirm'</span>) <span class="comment">// 获取对象。</span></span><br><span class="line">  ..text = <span class="string">'Confirm'</span> <span class="comment">// 调用成员变量。</span></span><br><span class="line">  ..classes.add(<span class="string">'important'</span>)</span><br><span class="line">  ..onClick.listen((e) =&gt; <span class="built_in">window</span>.alert(<span class="string">'Confirmed!'</span>));</span><br></pre></td></tr></table></figure>

<p>第一句调用函数 <code>querySelector()</code> ， 返回获取到的对象。 获取的对象依次执行级联运算符后面的代码， 代码执行后的返回值会被忽略。</p>
<p>上面的代码等价于：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> button = <span class="built_in">querySelector</span>(<span class="string">'#confirm'</span>);</span><br><span class="line">button.text = <span class="string">'Confirm'</span>;</span><br><span class="line">button.classes.add(<span class="string">'important'</span>);</span><br><span class="line">button.onClick.listen((e) =&gt; <span class="built_in">window</span>.alert(<span class="string">'Confirmed!'</span>));</span><br></pre></td></tr></table></figure>



<p>级联运算符可以嵌套，例如：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> addressBook = (AddressBookBuilder()</span><br><span class="line">      ..name = <span class="string">'jenny'</span></span><br><span class="line">      ..email = <span class="string">'jenny@example.com'</span></span><br><span class="line">      ..phone = (PhoneNumberBuilder()</span><br><span class="line">            ..number = <span class="string">'415-555-0100'</span></span><br><span class="line">            ..label = <span class="string">'home'</span>)</span><br><span class="line">          .build())</span><br><span class="line">    .build();</span><br></pre></td></tr></table></figure>

<p>在返回对象的函数中谨慎使用级联操作符。 例如，下面的代码是错误的：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> sb = <span class="built_in">StringBuffer</span>();</span><br><span class="line">sb.write(<span class="string">'foo'</span>)</span><br><span class="line">  ..write(<span class="string">'bar'</span>); <span class="comment">// Error: 'void' 没哟定义 'write' 函数。</span></span><br></pre></td></tr></table></figure>

<p><code>sb.write()</code> 函数调用返回 void， 不能在 <code>void</code> 对象上创建级联操作。</p>
<blockquote>
<p><strong>提示：</strong> 严格的来讲， “两个点” 的级联语法不是一个运算符。 它只是一个 Dart 的特殊语法。</p>
</blockquote>
<p>级联操作符是 <code>..</code>, 可以让你对一个对象中字段进行链式调用操作，类似Kotlin中的apply或run标准库函数的使用。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">question</span><br><span class="line">    ..id = <span class="string">'10001'</span></span><br><span class="line">    ..stem = <span class="string">'第一题: xxxxxx'</span></span><br><span class="line">    ..choices = &lt;<span class="built_in">String</span>&gt; [<span class="string">'A'</span>,<span class="string">'B'</span>,<span class="string">'C'</span>,<span class="string">'D'</span>]</span><br><span class="line">    ..hint = <span class="string">'听音频做题'</span>;</span><br></pre></td></tr></table></figure>

<p>Kotlin中的run函数实现对比</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">question.run &#123;</span><br><span class="line">    id &#x3D; &#39;10001&#39;</span><br><span class="line">    stem &#x3D; &#39;第一题: xxxxxx&#39;</span><br><span class="line">    choices &#x3D; &lt;String&gt; [&#39;A&#39;,&#39;B&#39;,&#39;C&#39;,&#39;D&#39;]</span><br><span class="line">    hint &#x3D; &#39;听音频做题&#39;    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="其他运算符"><a href="#其他运算符" class="headerlink" title="其他运算符"></a>其他运算符</h3><p>大多数剩余的运算符，已在示例中使用过：</p>
<table>
<thead>
<tr>
<th>Operator</th>
<th>Name</th>
<th>Meaning</th>
</tr>
</thead>
<tbody><tr>
<td><code>()</code></td>
<td>Function application</td>
<td>Represents a function call</td>
</tr>
<tr>
<td><code>[]</code></td>
<td>List access</td>
<td>Refers to the value at the specified index in the list</td>
</tr>
<tr>
<td><code>.</code></td>
<td>Member access</td>
<td>Refers to a property of an expression; example: <code>foo.bar</code> selects property <code>bar</code> from expression <code>foo</code></td>
</tr>
<tr>
<td><code>?.</code></td>
<td>Conditional member access</td>
<td>Like <code>.</code>, but the leftmost operand can be null; example: <code>foo?.bar</code> selects property <code>bar</code> from expression <code>foo</code> unless <code>foo</code> is null (in which case the value of <code>foo?.bar</code> is null)</td>
</tr>
</tbody></table>
<h4 id="条件成员访问符"><a href="#条件成员访问符" class="headerlink" title="条件成员访问符?."></a>条件成员访问符<code>?.</code></h4><blockquote>
<p>在Java中很容易碰到恼人的空指针错误，因此在方法调用前需要进行对象的非空判断，这样的判断语句使代码变得冗长，可读性差，不整洁。Dart中则发明了一个新的运算符用于处理此类情况。</p>
</blockquote>
<p>条件成员访问符<code>?.</code>，它和<code>.</code>类似，但是运算符左边的对象不能为<code>null</code>，否则返回<code>null</code>，若对象不为<code>null</code>，则返回对象本身。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; list1默认值为null</span><br><span class="line">List list1;</span><br><span class="line">print(list1?.length);  &#x2F;&#x2F; null</span><br><span class="line"></span><br><span class="line">List list2 &#x3D; [];</span><br><span class="line">print(list2?.length);  &#x2F;&#x2F; 0</span><br></pre></td></tr></table></figure>

<p>更多关于 <code>.</code>, <code>?.</code> 和 <code>..</code> 运算符介绍，参考 <a href="https://www.dartcn.com/guides/language/language-tour#classes" target="_blank" rel="noopener">Classes</a>.</p>
<h3 id="运算符重载"><a href="#运算符重载" class="headerlink" title="运算符重载"></a>运算符重载</h3><p>在dart支持运算符自定义重载,使用<strong>operator</strong>关键字定义重载函数。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">class Vip &#123;</span><br><span class="line">  final int level;</span><br><span class="line">  final int score;</span><br><span class="line"></span><br><span class="line">  const Vip(this.level, this.score);</span><br><span class="line"></span><br><span class="line">  bool operator &gt;(Vip other) &#x3D;&gt;</span><br><span class="line">      level &gt; other.level || (level &#x3D;&#x3D; other.level &amp;&amp; score &gt; other.score);</span><br><span class="line"></span><br><span class="line">  bool operator &lt;(Vip other) &#x3D;&gt;</span><br><span class="line">      level &lt; other.level || (level &#x3D;&#x3D; other.level &amp;&amp; score &lt; other.score);</span><br><span class="line"></span><br><span class="line">  bool operator &#x3D;&#x3D;(Vip other) &#x3D;&gt;</span><br><span class="line">      level &#x3D;&#x3D; other.level &amp;&amp;</span><br><span class="line">      score &#x3D;&#x3D; other.level; &#x2F;&#x2F;注意: 这段代码可能在高版本的Dart中会报错，在低版本是OK的</span><br><span class="line">  &#x2F;&#x2F;上述代码，在高版本Dart中，Object中已经重载了&#x3D;&#x3D;,所以需要加上covariant关键字重写这个重载函数。</span><br><span class="line">  @override</span><br><span class="line">  bool operator &#x3D;&#x3D;(covariant Vip other) &#x3D;&gt;</span><br><span class="line">      (level &#x3D;&#x3D; other.level &amp;&amp; score &#x3D;&#x3D; other.score);</span><br><span class="line"></span><br><span class="line">  @override</span><br><span class="line">  int get hashCode &#x3D;&gt; super.hashCode; &#x2F;&#x2F;伴随着你还需要重写hashCode，至于什么原因大家应该都知道</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">main() &#123;</span><br><span class="line">    var userVip1 &#x3D; Vip(4, 3500);</span><br><span class="line">    var userVip2 &#x3D; Vip(4, 1200);</span><br><span class="line">    if(userVip1 &gt; userVip2) &#123;</span><br><span class="line">        print(&#39;userVip1 is super vip&#39;);</span><br><span class="line">    &#125; else if(userVip1 &lt; userVip2) &#123;</span><br><span class="line">        print(&#39;userVip2 is super vip&#39;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="控制流程语句"><a href="#控制流程语句" class="headerlink" title="控制流程语句"></a>控制流程语句</h2><p>你可以通过下面任意一种方式来控制 Dart 程序流程：</p>
<ul>
<li><code>if</code> and <code>else</code></li>
<li><code>for</code> loops</li>
<li><code>while</code> and <code>do</code>-<code>while</code> loops</li>
<li><code>break</code> and <code>continue</code></li>
<li><code>switch</code> and <code>case</code></li>
<li><code>assert</code></li>
</ul>
<p>使用 <code>try-catch</code> 和 <code>throw</code> 也可以改变程序流程， 详见 <a href="https://www.dartcn.com/guides/language/language-tour#exceptions" target="_blank" rel="noopener">Exceptions</a>。</p>
<h3 id="if-和-else"><a href="#if-和-else" class="headerlink" title="if 和 else"></a>if 和 else</h3><p>Dart 支持 <code>if - else</code> 语句，其中 <code>else</code> 是可选的， 比如下面的例子， 另参考 <a href="https://www.dartcn.com/guides/language/language-tour#conditional-expressions" target="_blank" rel="noopener">conditional expressions</a>.</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (isRaining()) &#123;</span><br><span class="line">  you.bringRainCoat();</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (isSnowing()) &#123;</span><br><span class="line">  you.wearJacket();</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  car.putTopDown();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">if (year &gt;&#x3D; 2001) &#123;</span><br><span class="line">  print(&#39;21st century&#39;);</span><br><span class="line">&#125; else if (year &gt;&#x3D; 1901) &#123;</span><br><span class="line">  print(&#39;20th century&#39;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">if(i &lt; 0)&#123;</span><br><span class="line">  print(&#39;i &lt; 0&#39;);</span><br><span class="line">&#125;else if(i &#x3D;&#x3D; 0)&#123;</span><br><span class="line">  print(&#39;i &#x3D; 0&#39;);</span><br><span class="line">&#125; else &#123;</span><br><span class="line">  print(&#39;i &gt; 0&#39;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">void main() &#123;</span><br><span class="line">  var numbers &#x3D; [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11];</span><br><span class="line">  for (var i &#x3D; 0; i &lt; numbers.length; i++) &#123;</span><br><span class="line">    if (numbers[i].isEven) &#123;</span><br><span class="line">      print(&#39;偶数: $&#123;numbers[i]&#125;&#39;);</span><br><span class="line">    &#125; else if (numbers[i].isOdd) &#123;</span><br><span class="line">      print(&#39;奇数: $&#123;numbers[i]&#125;&#39;);</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      print(&#39;非法数字&#39;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>和 JavaScript 不同， Dart 的判断条件必须是布尔值，不能是其他类型。 更多信息，参考 <a href="https://www.dartcn.com/guides/language/language-tour#booleans" target="_blank" rel="noopener">Booleans</a> 。</p>
<h3 id="for-循环"><a href="#for-循环" class="headerlink" title="for 循环"></a>for 循环</h3><p>进行迭代操作，可以使用标准 <code>for</code> 语句。 例如：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> message = <span class="built_in">StringBuffer</span>(<span class="string">'Dart is fun'</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">  message.write(<span class="string">'!'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; for循环</span><br><span class="line">for(int i &#x3D; 0; i &lt; 9; i++) &#123;</span><br><span class="line">  print(i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">main() &#123;</span><br><span class="line">    List&lt;String&gt; colorList &#x3D; [&#39;red&#39;, &#39;yellow&#39;, &#39;blue&#39;, &#39;green&#39;];</span><br><span class="line">    for (var i &#x3D; 0; i &lt; colorList.length; i++) &#123;&#x2F;&#x2F;可以用var或int</span><br><span class="line">        print(colorList[i]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>闭包在 Dart 的 <code>for</code> 循环中会捕获循环的 index 索引值， 来避免 JavaScript 中常见的陷阱。 请思考示例代码：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> callbacks = [];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">2</span>; i++) &#123;</span><br><span class="line">  callbacks.add(() =&gt; <span class="built_in">print</span>(i));</span><br><span class="line">&#125;</span><br><span class="line">callbacks.forEach((c) =&gt; c());</span><br></pre></td></tr></table></figure>

<p>和期望一样，输出的是 <code>0</code> 和 <code>1</code>。 但是示例中的代码在 JavaScript 中会连续输出两个 <code>2</code> 。</p>
<p>I如果要迭代一个实现了 Iterable 接口的对象， 可以使用 <a href="https://api.dartlang.org/stable/dart-core/Iterable/forEach.html" target="_blank" rel="noopener">forEach()</a> 方法， 如果不需要使用当前计数值， 使用 <code>forEach()</code> 是非常棒的选择；</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">candidates.forEach((candidate) =&gt; candidate.interview());</span><br></pre></td></tr></table></figure>

<p>实现了 Iterable 的类（比如， List 和 Set）同样也支持使用 <code>for-in</code> 进行迭代操作 <a href="https://www.dartcn.com/guides/libraries/library-tour#iteration" target="_blank" rel="noopener">iteration</a> ：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> collection = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> x <span class="keyword">in</span> collection) &#123;</span><br><span class="line">  <span class="built_in">print</span>(x); <span class="comment">// 0 1 2</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">for (var object in flybyObjects) &#123;</span><br><span class="line">  print(object);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">for (int month &#x3D; 1; month &lt;&#x3D; 12; month++) &#123;</span><br><span class="line">  print(month);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="while-和-do-while"><a href="#while-和-do-while" class="headerlink" title="while 和 do-while"></a>while 和 do-while</h3><p><code>while</code> 循环在执行前判断执行条件：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; while循环</span><br><span class="line">while(true)&#123;</span><br><span class="line">  &#x2F;&#x2F;do something</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> (!isDone()) &#123;</span><br><span class="line">  doSomething();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">while (year &lt; 2016) &#123;</span><br><span class="line">  year +&#x3D; 1;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">main() &#123;</span><br><span class="line">    List&lt;String&gt; colorList &#x3D; [&#39;red&#39;, &#39;yellow&#39;, &#39;blue&#39;, &#39;green&#39;];</span><br><span class="line">    var index &#x3D; 0;</span><br><span class="line">    while (index &lt; colorList.length) &#123;</span><br><span class="line">        print(colorList[index++]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>do</code>-<code>while</code> 循环在执行<code>后</code>判断执行条件：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; do-while循环</span><br><span class="line">do&#123;</span><br><span class="line">  &#x2F;&#x2F;do something</span><br><span class="line">&#125; while(true);</span><br></pre></td></tr></table></figure>

<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">do</span> &#123;</span><br><span class="line">  printLine();</span><br><span class="line">&#125; <span class="keyword">while</span> (!atEndOfPage());</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">main() &#123;</span><br><span class="line">    List&lt;String&gt; colorList &#x3D; [&#39;red&#39;, &#39;yellow&#39;, &#39;blue&#39;, &#39;green&#39;];</span><br><span class="line">    var index &#x3D; 0;</span><br><span class="line">    do &#123;</span><br><span class="line">        print(colorList[index++]);</span><br><span class="line">    &#125; while (index &lt; colorList.length);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="break-和-continue"><a href="#break-和-continue" class="headerlink" title="break 和 continue"></a>break 和 continue</h3><p>使用 <code>break</code> 停止程序循环：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (shutDownRequested()) <span class="keyword">break</span>;</span><br><span class="line">  processIncomingRequests();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>使用 <code>continue</code> 跳转到下一次迭代：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; candidates.length; i++) &#123;</span><br><span class="line">  <span class="keyword">var</span> candidate = candidates[i];</span><br><span class="line">  <span class="keyword">if</span> (candidate.yearsExperience &lt; <span class="number">5</span>) &#123;</span><br><span class="line">    <span class="keyword">continue</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  candidate.interview();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>如果对象实现了 <a href="https://api.dartlang.org/stable/dart-core/Iterable-class.html" target="_blank" rel="noopener">Iterable</a> 接口 （例如，list 或者 set）。 那么上面示例完全可以用另一种方式来实现：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">candidates</span><br><span class="line">    .where((c) =&gt; c.yearsExperience &gt;= <span class="number">5</span>)</span><br><span class="line">    .forEach((c) =&gt; c.interview());</span><br></pre></td></tr></table></figure>

<p>舉個例子</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">main() &#123;</span><br><span class="line">    List&lt;String&gt; colorList &#x3D; [&#39;red&#39;, &#39;yellow&#39;, &#39;blue&#39;, &#39;green&#39;];</span><br><span class="line">    for (var i &#x3D; 0; i &lt; colorList.length; i++) &#123;&#x2F;&#x2F;可以用var或int</span><br><span class="line">        if(colorList[i] &#x3D;&#x3D; &#39;yellow&#39;) &#123;</span><br><span class="line">            continue;</span><br><span class="line">        &#125;</span><br><span class="line">        if(colorList[i] &#x3D;&#x3D; &#39;blue&#39;) &#123;</span><br><span class="line">            break;</span><br><span class="line">        &#125;</span><br><span class="line">        print(colorList[i]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="switch-和-case"><a href="#switch-和-case" class="headerlink" title="switch 和 case"></a>switch 和 case</h3><p>在 Dart 中 switch 语句使用 <code>==</code> 比较整数，字符串，或者编译时常量。 比较的对象必须都是同一个类的实例（并且不可以是子类）， 类必须没有对 <code>==</code> 重写。 <a href="https://www.dartcn.com/guides/language/language-tour#枚举类型" target="_blank" rel="noopener">枚举类型</a> 可以用于 <code>switch</code> 语句。</p>
<p><strong>提示：</strong> 在 Dart 中 Switch 语句仅适用于有限的情况下， 例如在 interpreter 或 scanner 中。</p>
<p>在 <code>case</code> 语句中，每个非空的 <code>case</code> 语句结尾需要跟一个 <code>break</code> 语句。 除 <code>break</code> 以外，还有可以使用 <code>continue</code>, <code>throw</code>，者 <code>return</code>。</p>
<p>当没有 <code>case</code> 语句匹配时，执行 <code>default</code> 代码：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> command = <span class="string">'OPEN'</span>;</span><br><span class="line"><span class="keyword">switch</span> (command) &#123;</span><br><span class="line">  <span class="keyword">case</span> <span class="string">'CLOSED'</span>:</span><br><span class="line">    executeClosed();</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">  <span class="keyword">case</span> <span class="string">'PENDING'</span>:</span><br><span class="line">    executePending();</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">  <span class="keyword">case</span> <span class="string">'APPROVED'</span>:</span><br><span class="line">    executeApproved();</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">  <span class="keyword">case</span> <span class="string">'DENIED'</span>:</span><br><span class="line">    executeDenied();</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">  <span class="keyword">case</span> <span class="string">'OPEN'</span>:</span><br><span class="line">    executeOpen();</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">  <span class="keyword">default</span>:</span><br><span class="line">    executeUnknown();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>下面的 <code>case</code> 程序示例中缺省了 <code>break</code> 语句，导致错误：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> command = <span class="string">'OPEN'</span>;</span><br><span class="line"><span class="keyword">switch</span> (command) &#123;</span><br><span class="line">  <span class="keyword">case</span> <span class="string">'OPEN'</span>:</span><br><span class="line">    executeOpen();</span><br><span class="line">    <span class="comment">// ERROR: 丢失 break</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">case</span> <span class="string">'CLOSED'</span>:</span><br><span class="line">    executeClosed();</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>但是， Dart 支持空 <code>case</code> 语句， 允许程序以 fall-through 的形式执行。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> command = <span class="string">'CLOSED'</span>;</span><br><span class="line"><span class="keyword">switch</span> (command) &#123;</span><br><span class="line">  <span class="keyword">case</span> <span class="string">'CLOSED'</span>: <span class="comment">// Empty case falls through.</span></span><br><span class="line">  <span class="keyword">case</span> <span class="string">'NOW_CLOSED'</span>:</span><br><span class="line">    <span class="comment">// Runs for both CLOSED and NOW_CLOSED.</span></span><br><span class="line">    executeNowClosed();</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在非空 <code>case</code> 中实现 fall-through 形式， 可以使用 <code>continue</code> 语句结合 <code>lable</code> 的方式实现:</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> command = <span class="string">'CLOSED'</span>;</span><br><span class="line"><span class="keyword">switch</span> (command) &#123;</span><br><span class="line">  <span class="keyword">case</span> <span class="string">'CLOSED'</span>:</span><br><span class="line">    executeClosed();</span><br><span class="line">    <span class="keyword">continue</span> nowClosed;</span><br><span class="line">  <span class="comment">// Continues executing at the nowClosed label.</span></span><br><span class="line"></span><br><span class="line">  nowClosed:</span><br><span class="line">  <span class="keyword">case</span> <span class="string">'NOW_CLOSED'</span>:</span><br><span class="line">    <span class="comment">// Runs for both CLOSED and NOW_CLOSED.</span></span><br><span class="line">    executeNowClosed();</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>case</code> 语句可以拥有局部变量， 这些局部变量只能在这个语句的作用域中可见。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Color getColor(String colorName) &#123;</span><br><span class="line">  Color currentColor &#x3D; Colors.blue;</span><br><span class="line">  switch (colorName) &#123;</span><br><span class="line">    case &quot;read&quot;:</span><br><span class="line">      currentColor &#x3D; Colors.red;</span><br><span class="line">      break;</span><br><span class="line">    case &quot;blue&quot;:</span><br><span class="line">      currentColor &#x3D; Colors.blue;</span><br><span class="line">      break;</span><br><span class="line">    case &quot;yellow&quot;:</span><br><span class="line">      currentColor &#x3D; Colors.yellow;</span><br><span class="line">      break;</span><br><span class="line">  &#125;</span><br><span class="line">  return currentColor;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="特有循環"><a href="#特有循環" class="headerlink" title="特有循環"></a>特有循環</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">var myList &#x3D; [&#39;Java&#39;,&#39;JavaScript&#39;,&#39;Dart&#39;];</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; for...in...循环，类似Java中的增强for</span><br><span class="line">for (var it in myList )&#123;</span><br><span class="line">    print(it);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; forEach循环。其参数为一个Function对象，这里传入一个匿名函数</span><br><span class="line">myList.forEach((var it)&#123;</span><br><span class="line">    print(it);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 可以使用匿名箭头函数简写</span><br><span class="line">myList.forEach((it) &#x3D;&gt; print(it));</span><br></pre></td></tr></table></figure>

<p>使用循环遍历Map</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">var myMap &#x3D; &#123;</span><br><span class="line">&#39;zhangsan&#39;:&#39;201901&#39;,</span><br><span class="line">&#39;lisi&#39;:&#39;201902&#39;,</span><br><span class="line">&#39;wangwu&#39;:&#39;201902&#39;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; forEach遍历Map</span><br><span class="line">myMap.forEach((k, v) &#x3D;&gt;  print(&quot;$k : $v&quot;));</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 根据键获取值来遍历。通过keys返回Map中所有键的集合</span><br><span class="line">for(var k in myMap.keys)&#123;</span><br><span class="line">    print(&quot;$k : $&#123;myMap[k]&#125;&quot;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">main() &#123;</span><br><span class="line">   List&lt;String&gt; colorList &#x3D; [&#39;red&#39;, &#39;yellow&#39;, &#39;blue&#39;, &#39;green&#39;];&#x2F;&#x2F;for-i遍历       </span><br><span class="line">   for(var i &#x3D; 0; i &lt; colorList.length; i++) &#123;&#x2F;&#x2F;可以使用var或int           </span><br><span class="line">       print(colorList[i]);               </span><br><span class="line">   &#125;       </span><br><span class="line">  &#x2F;&#x2F;forEach遍历       </span><br><span class="line">  colorList.forEach((color) &#x3D;&gt; print(color));&#x2F;&#x2F;forEach的参数为Function. &#x3D;&gt;使用了箭头函数       </span><br><span class="line">  &#x2F;&#x2F;for-in遍历       </span><br><span class="line">  for(var color in colorList) &#123;</span><br><span class="line">      print(color);       </span><br><span class="line">  &#125;       </span><br><span class="line">  &#x2F;&#x2F;while+iterator迭代器遍历，类似Java中的iteator       </span><br><span class="line">  while(colorList.iterator.moveNext()) &#123;           </span><br><span class="line">      print(colorList.iterator.current);       </span><br><span class="line">  &#125;   </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="assert"><a href="#assert" class="headerlink" title="assert"></a>assert</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;在dart中如果条件表达式结果不满足条件，则可以使用 assert 语句中断代码的执行。特别是在Flutter源码中随处可见都是assert断言的使用。</span><br><span class="line">&#x2F;&#x2F;注意: 断言只在检查模式下运行有效，如果在生产模式运行，则断言不会执行。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">assert(text !&#x3D; null);&#x2F;&#x2F;text为null,就会中断后续代码执行</span><br><span class="line">assert(urlString.startsWith(&#39;https&#39;));</span><br></pre></td></tr></table></figure>

<p>如果 <code>assert</code> 语句中的布尔条件为 false ， 那么正常的程序执行流程会被中断。 在本章中包含部分 assert 的使用， 下面是一些示例：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 确认变量值不为空。</span></span><br><span class="line"><span class="keyword">assert</span>(text != <span class="keyword">null</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 确认变量值小于100。</span></span><br><span class="line"><span class="keyword">assert</span>(number &lt; <span class="number">100</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 确认 URL 是否是 https 类型。</span></span><br><span class="line"><span class="keyword">assert</span>(urlString.startsWith(<span class="string">'https'</span>));</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>提示：</strong> assert 语句只在开发环境中有效， 在生产环境是无效的； Flutter 中的 assert 只在 <a href="https://flutter.io/debugging/#debug-mode-assertions" target="_blank" rel="noopener">debug 模式</a> 中有效。 开发用的工具，例如 <a href="https://webdev.dartlang.org/tools/dartdevc" target="_blank" rel="noopener">dartdevc</a> 默认是开启 assert 功能。 其他的一些工具， 例如 <a href="https://www.dartcn.com/server/tools/dart-vm" target="_blank" rel="noopener">dart</a> 和 <a href="https://webdev.dartlang.org/tools/dart2js" target="_blank" rel="noopener">dart2js,</a> 支持通过命令行开启 assert ： <code>--enable-asserts</code>。</p>
</blockquote>
<p>assert 的第二个参数可以为其添加一个字符串消息。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">assert</span>(urlString.startsWith(<span class="string">'https'</span>),</span><br><span class="line">    <span class="string">'URL (<span class="subst">$urlString</span>) should start with "https".'</span>);</span><br></pre></td></tr></table></figure>

<p>assert 的第一个参数可以是解析为布尔值的任何表达式。 如果表达式结果为 true ， 则断言成功，并继续执行。 如果表达式结果为 false ， 则断言失败，并抛出异常 (<a href="https://api.dartlang.org/stable/dart-core/AssertionError-class.html" target="_blank" rel="noopener">AssertionError</a>) 。</p>
<h2 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h2><p>Dart 支持单行注释、多行注释和文档注释。</p>
<h3 id="单行注释"><a href="#单行注释" class="headerlink" title="单行注释"></a>单行注释</h3><p>单行注释以 <code>//</code> 开始。 所有在 <code>//</code> 和改行结尾之间的内容被编译器忽略。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  <span class="comment">// <span class="doctag">TODO:</span> refactor into an AbstractLlamaGreetingFactory?</span></span><br><span class="line">  <span class="built_in">print</span>(<span class="string">'Welcome to my Llama farm!'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 这是一个标准的单行注释。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/// <span class="markdown">这是一个文档注释，用来为库，类，以及它们的成员提供文档。</span></span></span><br><span class="line"><span class="comment">/// <span class="markdown">像 IDEs 和 dartdoc 的工具会专门处理这些注释来生成文档。</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* 也支持类似的注释 */</span></span><br></pre></td></tr></table></figure>

<p><a href="https://www.dartcn.com/guides/language/language-tour#注释" target="_blank" rel="noopener">阅读更多</a> 在 Dart 中关于注释的内容， 包括文档工具的工作原理。</p>
<h3 id="多行注释"><a href="#多行注释" class="headerlink" title="多行注释"></a>多行注释</h3><p>多行注释以 <code>/*</code> 开始， 以 <code>*/</code> 结尾。 所有在 <code>/*</code> 和 <code>*/</code> 之间的内容被编译器忽略 （不会忽略文档注释）。 多行注释可以嵌套。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  <span class="comment">/*</span></span><br><span class="line"><span class="comment">   * This is a lot of work. Consider raising chickens.</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">  Llama larry = Llama();</span></span><br><span class="line"><span class="comment">  larry.feed();</span></span><br><span class="line"><span class="comment">  larry.exercise();</span></span><br><span class="line"><span class="comment">  larry.clean();</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="文档注释"><a href="#文档注释" class="headerlink" title="文档注释"></a>文档注释</h3><p>文档注释可以是多行注释，也可以是单行注释， 文档注释以 <code>///</code> 或者 <code>/**</code> 开始。 在连续行上使用 <code>///</code> 与多行文档注释具有相同的效果。</p>
<p>在文档注释中，除非用中括号括起来，否则Dart 编译器会忽略所有文本。 使用中括号可以引用类、 方法、 字段、 顶级变量、 函数、 和参数。 括号中的符号会在已记录的程序元素的词法域中进行解析。</p>
<p>下面是一个引用其他类和成员的文档注释：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/// <span class="markdown">A domesticated South American camelid (Lama glama).</span></span></span><br><span class="line"><span class="comment">///</span></span><br><span class="line"><span class="comment">/// <span class="markdown">自从西班牙时代以来，</span></span></span><br><span class="line"><span class="comment">/// <span class="markdown">安第斯文化就将骆驼当做肉食类和运输类动物。</span></span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Llama</span> </span>&#123;</span><br><span class="line">  <span class="built_in">String</span> name;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// <span class="markdown">喂养骆驼 [Food].</span></span></span><br><span class="line">  <span class="comment">///</span></span><br><span class="line">  <span class="comment">/// <span class="markdown">典型的美洲驼每周吃一捆干草。</span></span></span><br><span class="line">  <span class="keyword">void</span> feed(Food food) &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// <span class="markdown">使用 [activity] 训练骆驼</span></span></span><br><span class="line">  <span class="comment">/// <span class="markdown">[timeLimit] 分钟。</span></span></span><br><span class="line">  <span class="keyword">void</span> exercise(Activity activity, <span class="built_in">int</span> timeLimit) &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在生成的文档中，<code>[Food]</code> 会成为一个链接， 指向 Food 类的 API 文档。</p>
<p>解析 Dart 代码并生成 HTML 文档，可以使用 SDK 中的 <a href="https://github.com/dart-lang/dartdoc#dartdoc" target="_blank" rel="noopener">documentation generation tool.</a> 关于生成文档的实例，请参考 <a href="https://api.dartlang.org/stable" target="_blank" rel="noopener">Dart API documentation.</a> 关于文档结构的建议，请参考 <a href="https://www.dartcn.com/guides/language/effective-dart/documentation" target="_blank" rel="noopener">Guidelines for Dart Doc Comments.</a></p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>本页概述了 Dart 语言中常用的功能。 还有更多特性有待实现，但我们希望它们不会破坏现有代码。 有关更多信息，请参考 <a href="https://www.dartcn.com/guides/language/spec" target="_blank" rel="noopener">Dart language specification</a> 和 <a href="https://www.dartcn.com/guides/language/effective-dart" target="_blank" rel="noopener">Effective Dart</a>.</p>
<p>要了解更多关于 Dart 核心库的内容，请参考 <a href="https://www.dartcn.com/guides/libraries/library-tour" target="_blank" rel="noopener">A Tour of the Dart Libraries</a>.</p>
<p>BohuaFu整理</p>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Dart/" rel="tag">#Dart</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2020/04/13/dart/d-20200413-0005/" rel="next" title="Dart HelloWorld">
                <i class="fa fa-chevron-left"></i> Dart HelloWorld
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2020/04/13/dart/d-20200413-0007/" rel="prev" title="Dart 面向對象">
                Dart 面向對象 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="https://github.com/BohuaFu/AssetsBH/blob/master/bh/avater/bh_avatar_001.jpg?raw=true"
                alt="Bohua Fu" />
            
              <p class="site-author-name" itemprop="name">Bohua Fu</p>
              <p class="site-description motion-element" itemprop="description">The stars change, but the mind remains the same.</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/%7C%7C%20archive">
              
                  <span class="site-state-item-count">31</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">6</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/BohuaFu" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
            </div>
          

          
          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-inline">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-link"></i>
                Links
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="https://bohuafu.github.io/" title="BH" target="_blank">BH</a>
                  </li>
                
              </ul>
            </div>
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Dart-基礎語法"><span class="nav-number">1.</span> <span class="nav-text">Dart 基礎語法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#HelloWorld程序"><span class="nav-number">2.</span> <span class="nav-text">HelloWorld程序</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#一个简单的-Dart-程序"><span class="nav-number">3.</span> <span class="nav-text">一个简单的 Dart 程序</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#重要的概念"><span class="nav-number">4.</span> <span class="nav-text">重要的概念</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#关键字"><span class="nav-number">5.</span> <span class="nav-text">关键字</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#变量"><span class="nav-number">6.</span> <span class="nav-text">变量</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#默认值"><span class="nav-number">6.1.</span> <span class="nav-text">默认值</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Final-和-Const"><span class="nav-number">6.2.</span> <span class="nav-text">Final 和 Const</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#内建类型"><span class="nav-number">7.</span> <span class="nav-text">内建类型</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Number"><span class="nav-number">7.1.</span> <span class="nav-text">Number</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#String"><span class="nav-number">7.2.</span> <span class="nav-text">String</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Boolean"><span class="nav-number">7.3.</span> <span class="nav-text">Boolean</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#List"><span class="nav-number">7.4.</span> <span class="nav-text">List</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Set"><span class="nav-number">7.5.</span> <span class="nav-text">Set</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Map"><span class="nav-number">7.6.</span> <span class="nav-text">Map</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Rune"><span class="nav-number">7.7.</span> <span class="nav-text">Rune</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Symbol"><span class="nav-number">7.8.</span> <span class="nav-text">Symbol</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#函数"><span class="nav-number">8.</span> <span class="nav-text">函数</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#可选参数"><span class="nav-number">8.1.</span> <span class="nav-text">可选参数</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#命名可选参数"><span class="nav-number">8.1.1.</span> <span class="nav-text">命名可选参数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#位置可选参数"><span class="nav-number">8.1.2.</span> <span class="nav-text">位置可选参数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#默认参数值"><span class="nav-number">8.1.3.</span> <span class="nav-text">默认参数值</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#main-函数"><span class="nav-number">8.2.</span> <span class="nav-text">main() 函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#函数是一等对象"><span class="nav-number">8.3.</span> <span class="nav-text">函数是一等对象</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#匿名函数"><span class="nav-number">8.4.</span> <span class="nav-text">匿名函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#箭頭函數"><span class="nav-number">8.5.</span> <span class="nav-text">箭頭函數</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#词法作用域"><span class="nav-number">8.6.</span> <span class="nav-text">词法作用域</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#词法闭包"><span class="nav-number">8.7.</span> <span class="nav-text">词法闭包</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#测试函数是否相等"><span class="nav-number">8.8.</span> <span class="nav-text">测试函数是否相等</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#返回值"><span class="nav-number">8.9.</span> <span class="nav-text">返回值</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#运算符"><span class="nav-number">9.</span> <span class="nav-text">运算符</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#算术运算符"><span class="nav-number">9.1.</span> <span class="nav-text">算术运算符</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#关系运算符"><span class="nav-number">9.2.</span> <span class="nav-text">关系运算符</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#类型判定运算符"><span class="nav-number">9.3.</span> <span class="nav-text">类型判定运算符</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#赋值运算符"><span class="nav-number">9.4.</span> <span class="nav-text">赋值运算符</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#逻辑运算符"><span class="nav-number">9.5.</span> <span class="nav-text">逻辑运算符</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#按位和移位运算符"><span class="nav-number">9.6.</span> <span class="nav-text">按位和移位运算符</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#条件表达式"><span class="nav-number">9.7.</span> <span class="nav-text">条件表达式</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#result-condition-expr1-expr2"><span class="nav-number">9.7.1.</span> <span class="nav-text">result &#x3D; condition ? expr1 : expr2</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#result-expr1-expr2"><span class="nav-number">9.7.2.</span> <span class="nav-text">result &#x3D; expr1 ?? expr2</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#expr1-expr2"><span class="nav-number">9.7.3.</span> <span class="nav-text">expr1 ??&#x3D; expr2**</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#result-expr1-value"><span class="nav-number">9.7.4.</span> <span class="nav-text">result &#x3D; expr1?.value</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#级联运算符"><span class="nav-number">9.8.</span> <span class="nav-text">级联运算符 (..)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#其他运算符"><span class="nav-number">9.9.</span> <span class="nav-text">其他运算符</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#条件成员访问符"><span class="nav-number">9.9.1.</span> <span class="nav-text">条件成员访问符?.</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#运算符重载"><span class="nav-number">9.10.</span> <span class="nav-text">运算符重载</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#控制流程语句"><span class="nav-number">10.</span> <span class="nav-text">控制流程语句</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#if-和-else"><span class="nav-number">10.1.</span> <span class="nav-text">if 和 else</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#for-循环"><span class="nav-number">10.2.</span> <span class="nav-text">for 循环</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#while-和-do-while"><span class="nav-number">10.3.</span> <span class="nav-text">while 和 do-while</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#break-和-continue"><span class="nav-number">10.4.</span> <span class="nav-text">break 和 continue</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#switch-和-case"><span class="nav-number">10.5.</span> <span class="nav-text">switch 和 case</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#特有循環"><span class="nav-number">10.6.</span> <span class="nav-text">特有循環</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#assert"><span class="nav-number">10.7.</span> <span class="nav-text">assert</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#注释"><span class="nav-number">11.</span> <span class="nav-text">注释</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#单行注释"><span class="nav-number">11.1.</span> <span class="nav-text">单行注释</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#多行注释"><span class="nav-number">11.2.</span> <span class="nav-text">多行注释</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#文档注释"><span class="nav-number">11.3.</span> <span class="nav-text">文档注释</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#总结"><span class="nav-number">12.</span> <span class="nav-text">总结</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Bohua Fu</span>

  
</div>









        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
